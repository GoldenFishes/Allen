import{EVENT_CODE as e,ElButton as t,ElIcon as n,ElInput as r,ElMessage as i,ElTooltip as a,Fragment as o,TinyColor as s,Transition as c,__plugin_vue_export_helper_default as l,_export_sfc as u,addClass as d,arrow_down_default as f,arrow_left_default as p,arrow_right_default as m,bell_default as h,bindHumanAgent as g,buildProps as _,close_default as v,computed as y,createBaseVNode as b,createBlock as x,createCommentVNode as S,createElementBlock as C,createTextVNode as w,createVNode as T,debugWarn as ee,defineComponent as E,definePropType as D,document_default as O,flattedChildren as k,getCurrentInstance as te,getStatesApi as A,h as j,hasClass as M,iconPropType as N,inject as ne,isArray as re,isClient as ie,isElement as ae,isNil_default as oe,isObject as se,isPropAbsent as ce,isString as P,isUndefined as le,list_default as ue,mergeProps as F,minus_default as I,more_default as de,mutable as fe,nextTick as pe,normalizeClass as L,normalizeStyle as R,onBeforeUnmount as me,onMounted as z,onUnmounted as he,openBlock as B,operation_default as ge,provide as _e,reactive as ve,ref as V,removeClass as ye,renderList as H,renderSlot as U,resolveComponent as be,resolveDirective as xe,resolveDynamicComponent as W,throwError as G,tickets_default as Se,toDisplayString as K,toHandlers as Ce,toRef as we,triggerEvent as q,unref as J,useMasStore as Te,useModalMenuIntegration as Ee,useModalStore as De,useNamespace as Y,useResizeObserver as Oe,useRoute as ke,useRouter as Ae,useTimeoutFn as je,user_default as Me,vShow as Ne,watch as X,watchEffect as Pe,withCtx as Z,withDirectives as Q,withInstall as Fe,withModifiers as Ie,withNoopInstall as Le}from"./index-BEqafgQL.js";const $=new Map;if(ie){let e;document.addEventListener(`mousedown`,t=>e=t),document.addEventListener(`mouseup`,t=>{if(e){for(let n of $.values())for(let{documentHandler:r}of n)r(t,e);e=void 0}})}function Re(e,t){let n=[];return re(t.arg)?n=t.arg:ae(t.arg)&&n.push(t.arg),function(r,i){let a=t.instance.popperRef,o=r.target,s=i?.target,c=!t||!t.instance,l=!o||!s,u=e.contains(o)||e.contains(s),d=e===o,f=n.length&&n.some(e=>e?.contains(o))||n.length&&n.includes(s),p=a&&(a.contains(o)||a.contains(s));c||l||u||d||f||p||t.value(r,i)}}const ze={beforeMount(e,t){$.has(e)||$.set(e,[]),$.get(e).push({documentHandler:Re(e,t),bindingFn:t.value})},updated(e,t){$.has(e)||$.set(e,[]);let n=$.get(e),r=n.findIndex(e=>e.bindingFn===t.oldValue),i={documentHandler:Re(e,t),bindingFn:t.value};r>=0?n.splice(r,1,i):n.push(i)},unmounted(e){$.delete(e)}},Be=E({name:`ElCollapseTransition`}),Ve=E({...Be,setup(e){let t=Y(`collapse-transition`),n=e=>{e.style.maxHeight=``,e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},r={beforeEnter(e){e.dataset||={},e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame(()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:e.scrollHeight===0?e.style.maxHeight=0:e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow=`hidden`})},afterEnter(e){e.style.maxHeight=``,e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){n(e)},beforeLeave(e){e.dataset||={},e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow=`hidden`},leave(e){e.scrollHeight!==0&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){n(e)},leaveCancelled(e){n(e)}};return(e,n)=>(B(),x(c,F({name:J(t).b()},Ce(r)),{default:Z(()=>[U(e.$slots,`default`)]),_:3},16,[`name`]))}});var He=u(Ve,[[`__file`,`collapse-transition.vue`]]);const Ue=Fe(He),We=_({direction:{type:String,values:[`horizontal`,`vertical`],default:`horizontal`},contentPosition:{type:String,values:[`left`,`center`,`right`],default:`center`},borderStyle:{type:D(String),default:`solid`}}),Ge=E({name:`ElDivider`}),Ke=E({...Ge,props:We,setup(e){let t=e,n=Y(`divider`),r=y(()=>n.cssVar({"border-style":t.borderStyle}));return(e,t)=>(B(),C(`div`,{class:L([J(n).b(),J(n).m(e.direction)]),style:R(J(r)),role:`separator`},[e.$slots.default&&e.direction!==`vertical`?(B(),C(`div`,{key:0,class:L([J(n).e(`text`),J(n).is(e.contentPosition)])},[U(e.$slots,`default`)],2)):S(`v-if`,!0)],6))}});var qe=u(Ke,[[`__file`,`divider.vue`]]);const Je=Fe(qe);var Ye=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll(`li`),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){let t=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener(`keydown`,n=>{let r=!1;switch(n.code){case e.down:this.gotoSubIndex(this.subIndex+1),r=!0;break;case e.up:this.gotoSubIndex(this.subIndex-1),r=!0;break;case e.tab:q(t,`mouseleave`);break;case e.enter:case e.numpadEnter:case e.space:r=!0,n.currentTarget.click();break}return r&&(n.preventDefault(),n.stopPropagation()),!1})})}},Xe=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute(`tabindex`,`0`);let t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new Ye(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener(`keydown`,t=>{let n=!1;switch(t.code){case e.down:q(t.currentTarget,`mouseenter`),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break;case e.up:q(t.currentTarget,`mouseenter`),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break;case e.tab:q(t.currentTarget,`mouseleave`);break;case e.enter:case e.numpadEnter:case e.space:n=!0,t.currentTarget.click();break}n&&t.preventDefault()})}},Ze=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){let t=this.domNode.childNodes;Array.from(t).forEach(t=>{t.nodeType===1&&new Xe(t,e)})}};const Qe=E({name:`ElMenuCollapseTransition`}),$e=E({...Qe,setup(e){let t=Y(`menu`),n={onBeforeEnter:e=>e.style.opacity=`0.2`,onEnter(e,n){d(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=`1`,n()},onAfterEnter(e){ye(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=``},onBeforeLeave(e){e.dataset||={},M(e,t.m(`collapse`))?(ye(e,t.m(`collapse`)),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),d(e,t.m(`collapse`))):(d(e,t.m(`collapse`)),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),ye(e,t.m(`collapse`))),e.style.width=`${e.scrollWidth}px`,e.style.overflow=`hidden`},onLeave(e){d(e,`horizontal-collapse-transition`),e.style.width=`${e.dataset.scrollWidth}px`}};return(e,t)=>(B(),x(c,F({mode:`out-in`},J(n)),{default:Z(()=>[U(e.$slots,`default`)]),_:3},16))}});var et=u($e,[[`__file`,`menu-collapse-transition.vue`]]);function tt(e,t){let n=y(()=>{let n=e.parent,r=[t.value];for(;n.type.name!==`ElMenu`;)n.props.index&&r.unshift(n.props.index),n=n.parent;return r}),r=y(()=>{let t=e.parent;for(;t&&![`ElMenu`,`ElSubMenu`].includes(t.type.name);)t=t.parent;return t});return{parentMenu:r,indexPath:n}}function nt(e){let t=y(()=>{let t=e.backgroundColor;return t?new s(t).shade(20).toString():``});return t}const rt=(e,t)=>{let n=Y(`menu`);return y(()=>n.cssVarBlock({"text-color":e.textColor||``,"hover-text-color":e.textColor||``,"bg-color":e.backgroundColor||``,"hover-bg-color":nt(e).value||``,"active-color":e.activeTextColor||``,level:`${t}`}))},it=`rootMenu`,at=`subMenu:`,ot=_({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:N},expandOpenIcon:{type:N},collapseCloseIcon:{type:N},collapseOpenIcon:{type:N}}),st=`ElSubMenu`;var ct=E({name:st,props:ot,setup(e,{slots:t,expose:r}){let i=te(),{indexPath:s,parentMenu:c}=tt(i,y(()=>e.index)),l=Y(`menu`),u=Y(`sub-menu`),d=ne(it);d||G(st,`can not inject root menu`);let p=ne(`${at}${c.value.uid}`);p||G(st,`can not inject sub menu`);let h=V({}),g=V({}),_,v=V(!1),b=V(),x=V(),S=y(()=>k.value===`horizontal`&&w.value?`bottom-start`:`right-start`),C=y(()=>k.value===`horizontal`&&w.value||k.value===`vertical`&&!d.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?D.value?e.expandOpenIcon:e.expandCloseIcon:f:e.collapseCloseIcon&&e.collapseOpenIcon?D.value?e.collapseOpenIcon:e.collapseCloseIcon:m),w=y(()=>p.level===0),T=y(()=>{let t=e.teleported;return le(t)?w.value:t}),ee=y(()=>d.props.collapse?`${l.namespace.value}-zoom-in-left`:`${l.namespace.value}-zoom-in-top`),E=y(()=>k.value===`horizontal`&&w.value?[`bottom-start`,`bottom-end`,`top-start`,`top-end`,`right-start`,`left-start`]:[`right-start`,`right`,`right-end`,`left-start`,`bottom-start`,`bottom-end`,`top-start`,`top-end`]),D=y(()=>d.openedMenus.includes(e.index)),O=y(()=>[...Object.values(h.value),...Object.values(g.value)].some(({active:e})=>e)),k=y(()=>d.props.mode),A=y(()=>d.props.persistent),M=ve({index:e.index,indexPath:s,active:O}),N=rt(d.props,p.level+1),re=y(()=>{var t;return(t=e.popperOffset)??d.props.popperOffset}),ie=y(()=>{var t;return(t=e.popperClass)??d.props.popperClass}),ae=y(()=>{var t;return(t=e.showTimeout)??d.props.showTimeout}),oe=y(()=>{var t;return(t=e.hideTimeout)??d.props.hideTimeout}),se=()=>{var e,t,n;return(n=(t=(e=x.value)?.popperRef)?.popperInstanceRef)?.destroy()},ce=e=>{e||se()},ue=()=>{d.props.menuTrigger===`hover`&&d.props.mode===`horizontal`||d.props.collapse&&d.props.mode===`vertical`||e.disabled||d.handleSubMenuClick({index:e.index,indexPath:s.value,active:O.value})},F=(t,n=ae.value)=>{var r;if(t.type!==`focus`){if(d.props.menuTrigger===`click`&&d.props.mode===`horizontal`||!d.props.collapse&&d.props.mode===`vertical`||e.disabled){p.mouseInChild.value=!0;return}p.mouseInChild.value=!0,_?.(),{stop:_}=je(()=>{d.openMenu(e.index,s.value)},n),T.value&&((r=c.value.vnode.el)==null||r.dispatchEvent(new MouseEvent(`mouseenter`)))}},I=(t=!1)=>{var n;if(d.props.menuTrigger===`click`&&d.props.mode===`horizontal`||!d.props.collapse&&d.props.mode===`vertical`){p.mouseInChild.value=!1;return}_?.(),p.mouseInChild.value=!1,{stop:_}=je(()=>!v.value&&d.closeMenu(e.index,s.value),oe.value),T.value&&t&&((n=p.handleMouseleave)==null||n.call(p,!0))};X(()=>d.props.collapse,e=>ce(!!e));{let e=e=>{g.value[e.index]=e},t=e=>{delete g.value[e.index]};_e(`${at}${i.uid}`,{addSubMenu:e,removeSubMenu:t,handleMouseleave:I,mouseInChild:v,level:p.level+1})}return r({opened:D}),z(()=>{d.addSubMenu(M),p.addSubMenu(M)}),me(()=>{p.removeSubMenu(M),d.removeSubMenu(M)}),()=>{var r;let s=[(r=t.title)?.call(t),j(n,{class:u.e(`icon-arrow`),style:{transform:D.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&d.props.collapse?`none`:`rotateZ(180deg)`:`none`}},{default:()=>P(C.value)?j(i.appContext.components[C.value]):j(C.value)})],c=d.isMenuPopup?j(a,{ref:x,visible:D.value,effect:`light`,pure:!0,offset:re.value,showArrow:!1,persistent:A.value,popperClass:ie.value,placement:S.value,teleported:T.value,fallbackPlacements:E.value,transition:ee.value,gpuAcceleration:!1},{content:()=>{var e;return j(`div`,{class:[l.m(k.value),l.m(`popup-container`),ie.value],onMouseenter:e=>F(e,100),onMouseleave:()=>I(!0),onFocus:e=>F(e,100)},[j(`ul`,{class:[l.b(),l.m(`popup`),l.m(`popup-${S.value}`)],style:N.value},[(e=t.default)?.call(t)])])},default:()=>j(`div`,{class:u.e(`title`),onClick:ue},s)}):j(o,{},[j(`div`,{class:u.e(`title`),ref:b,onClick:ue},s),j(Ue,{},{default:()=>{var e;return Q(j(`ul`,{role:`menu`,class:[l.b(),l.m(`inline`)],style:N.value},[(e=t.default)?.call(t)]),[[Ne,D.value]])}})]);return j(`li`,{class:[u.b(),u.is(`active`,O.value),u.is(`opened`,D.value),u.is(`disabled`,e.disabled)],role:`menuitem`,ariaHaspopup:!0,ariaExpanded:D.value,onMouseenter:F,onMouseleave:()=>I(),onFocus:F},[c])}}});const lt=_({mode:{type:String,values:[`horizontal`,`vertical`],default:`vertical`},defaultActive:{type:String,default:``},defaultOpeneds:{type:D(Array),default:()=>fe([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:[`hover`,`click`],default:`hover`},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:N,default:()=>de},popperEffect:{type:D(String),default:`dark`},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),ut=e=>re(e)&&e.every(e=>P(e)),dt={close:(e,t)=>P(e)&&ut(t),open:(e,t)=>P(e)&&ut(t),select:(e,t,n,r)=>P(e)&&ut(t)&&se(n)&&(le(r)||r instanceof Promise)};var ft=E({name:`ElMenu`,props:lt,emits:dt,setup(e,{emit:t,slots:r,expose:i}){let a=te(),o=a.appContext.config.globalProperties.$router,s=V(),c=Y(`menu`),l=Y(`sub-menu`),u=V(-1),d=V(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),f=V(e.defaultActive),p=V({}),m=V({}),h=y(()=>e.mode===`horizontal`||e.mode===`vertical`&&e.collapse),g=()=>{let t=f.value&&p.value[f.value];if(!t||e.mode===`horizontal`||e.collapse)return;let n=t.indexPath;n.forEach(e=>{let t=m.value[e];t&&_(e,t.indexPath)})},_=(n,r)=>{d.value.includes(n)||(e.uniqueOpened&&(d.value=d.value.filter(e=>r.includes(e))),d.value.push(n),t(`open`,n,r))},v=e=>{let t=d.value.indexOf(e);t!==-1&&d.value.splice(t,1)},b=(e,n)=>{v(e),t(`close`,e,n)},x=({index:e,indexPath:t})=>{let n=d.value.includes(e);n?b(e,t):_(e,t)},S=n=>{(e.mode===`horizontal`||e.collapse)&&(d.value=[]);let{index:r,indexPath:i}=n;if(!(oe(r)||oe(i)))if(e.router&&o){let e=n.route||r,a=o.push(e).then(e=>(e||(f.value=r),e));t(`select`,r,i,{index:r,indexPath:i,route:e},a)}else f.value=r,t(`select`,r,i,{index:r,indexPath:i})},C=t=>{var n;let r=p.value,i=r[t]||f.value&&r[f.value]||r[e.defaultActive];f.value=(n=i?.index)??t},w=e=>{let t=getComputedStyle(e),n=Number.parseInt(t.marginLeft,10),r=Number.parseInt(t.marginRight,10);return e.offsetWidth+n+r||0},T=()=>{var e,t;if(!s.value)return-1;let n=Array.from((t=(e=s.value)?.childNodes)??[]).filter(e=>e.nodeName!==`#text`||e.nodeValue),r=64,i=getComputedStyle(s.value),a=Number.parseInt(i.paddingLeft,10),o=Number.parseInt(i.paddingRight,10),c=s.value.clientWidth-a-o,l=0,u=0;return n.forEach((e,t)=>{e.nodeName!==`#comment`&&(l+=w(e),l<=c-r&&(u=t+1))}),u===n.length?-1:u},ee=e=>m.value[e].indexPath,E=(e,t=33.34)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}},D=!0,O=()=>{if(u.value===T())return;let e=()=>{u.value=-1,pe(()=>{u.value=T()})};D?e():E(e)(),D=!1};X(()=>e.defaultActive,e=>{p.value[e]||(f.value=``),C(e)}),X(()=>e.collapse,e=>{e&&(d.value=[])}),X(p.value,g);let A;Pe(()=>{e.mode===`horizontal`&&e.ellipsis?A=Oe(s,O).stop:A?.()});let M=V(!1);{let t=e=>{m.value[e.index]=e},n=e=>{delete m.value[e.index]},r=e=>{p.value[e.index]=e},i=e=>{delete p.value[e.index]};_e(it,ve({props:e,openedMenus:d,items:p,subMenus:m,activeIndex:f,isMenuPopup:h,addMenuItem:r,removeMenuItem:i,addSubMenu:t,removeSubMenu:n,openMenu:_,closeMenu:b,handleMenuItemClick:S,handleSubMenuClick:x})),_e(`${at}${a.uid}`,{addSubMenu:t,removeSubMenu:n,mouseInChild:M,level:0})}z(()=>{e.mode===`horizontal`&&new Ze(a.vnode.el,c.namespace.value)});{let e=e=>{let{indexPath:t}=m.value[e];t.forEach(e=>_(e,t))};i({open:e,close:v,updateActiveIndex:C,handleResize:O})}let N=rt(e,0);return()=>{var i,a;let o=(a=(i=r.default)?.call(r))??[],f=[];if(e.mode===`horizontal`&&s.value){let t=k(o),r=u.value===-1?t:t.slice(0,u.value),i=u.value===-1?[]:t.slice(u.value);i?.length&&e.ellipsis&&(o=r,f.push(j(ct,{index:`sub-menu-more`,class:l.e(`hide-arrow`),popperOffset:e.popperOffset},{title:()=>j(n,{class:l.e(`icon-more`)},{default:()=>j(e.ellipsisIcon)}),default:()=>i})))}let p=e.closeOnClickOutside?[[ze,()=>{d.value.length&&(M.value||(d.value.forEach(e=>t(`close`,e,ee(e))),d.value=[]))}]]:[],m=Q(j(`ul`,{key:String(e.collapse),role:`menubar`,ref:s,style:N.value,class:{[c.b()]:!0,[c.m(e.mode)]:!0,[c.m(`collapse`)]:e.collapse}},[...o,...f]),p);return e.collapseTransition&&e.mode===`vertical`?j(et,()=>m):m}}});const pt=_({index:{type:D([String,null]),default:null},route:{type:D([String,Object])},disabled:Boolean}),mt={click:e=>P(e.index)&&re(e.indexPath)},ht=`ElMenuItem`,gt=E({name:ht}),_t=E({...gt,props:pt,emits:mt,setup(e,{expose:t,emit:n}){let r=e;ce(r.index)&&ee(ht,`Missing required prop: "index"`);let i=te(),s=ne(it),c=Y(`menu`),l=Y(`menu-item`);s||G(ht,`can not inject root menu`);let{parentMenu:u,indexPath:d}=tt(i,we(r,`index`)),f=ne(`${at}${u.value.uid}`);f||G(ht,`can not inject sub menu`);let p=y(()=>r.index===s.activeIndex),m=ve({index:r.index,indexPath:d,active:p}),h=()=>{r.disabled||(s.handleMenuItemClick({index:r.index,indexPath:d.value,route:r.route}),n(`click`,m))};return z(()=>{f.addSubMenu(m),s.addMenuItem(m)}),me(()=>{f.removeSubMenu(m),s.removeMenuItem(m)}),t({parentMenu:u,rootMenu:s,active:p,nsMenu:c,nsMenuItem:l,handleClick:h}),(e,t)=>(B(),C(`li`,{class:L([J(l).b(),J(l).is(`active`,J(p)),J(l).is(`disabled`,e.disabled)]),role:`menuitem`,tabindex:`-1`,onClick:h},[J(u).type.name===`ElMenu`&&J(s).props.collapse&&e.$slots.title?(B(),x(J(a),{key:0,effect:J(s).props.popperEffect,placement:`right`,"fallback-placements":[`left`],persistent:J(s).props.persistent},{content:Z(()=>[U(e.$slots,`title`)]),default:Z(()=>[b(`div`,{class:L(J(c).be(`tooltip`,`trigger`))},[U(e.$slots,`default`)],2)]),_:3},8,[`effect`,`persistent`])):(B(),C(o,{key:1},[U(e.$slots,`default`),U(e.$slots,`title`)],64))],2))}});var vt=u(_t,[[`__file`,`menu-item.vue`]]);const yt={title:String},bt=E({name:`ElMenuItemGroup`}),xt=E({...bt,props:yt,setup(e){let t=Y(`menu-item-group`);return(e,n)=>(B(),C(`li`,{class:L(J(t).b())},[b(`div`,{class:L(J(t).e(`title`))},[e.$slots.title?U(e.$slots,`title`,{key:1}):(B(),C(o,{key:0},[w(K(e.title),1)],64))],2),b(`ul`,null,[U(e.$slots,`default`)])],2))}});var St=u(xt,[[`__file`,`menu-item-group.vue`]]);const Ct=Fe(ft,{MenuItem:vt,MenuItemGroup:St,SubMenu:ct}),wt=Le(vt),Tt=Le(St),Et=Le(ct);function Dt(){let e=Ae(),t=e=>{let{route:t}=e;return{path:t.path.startsWith(`/`)?t.path:`/${t.path}`,name:t.name,title:t.meta?.title||``,icon:t.meta?.icon,index:e.index.toString()}},n=y(()=>{let n=e.getRoutes(),r=[],i=n.find(e=>e.name===`layout`);return i&&i.children&&i.children.forEach((e,n)=>{if(e.meta&&e.meta.title&&e.meta.icon){let i=t({route:e,index:n});r.push(i)}}),r}),r=(e,n,i)=>{let a;e?.meta?.title&&(a=t({route:e,index:typeof n==`string`?parseInt(n):n})),a&&e.children?.length&&(a.children=[],e.children.forEach((e,t)=>{a?.children&&r(e,`${n}-${t}`,a.children)})),a&&i.push(a)},i=y(()=>{let t=[...e.getRoutes()],n=[],i=t.filter(e=>e.name===`layout`);for(let e=0;e<i.length;e++)r(i[e],e,n);return n}),a=e=>{let t=n.value.find(t=>t.path===e);return t||=n.value.find(t=>{let n=t.path.endsWith(`/`)?t.path:t.path+`/`,r=e.endsWith(`/`)?e:e+`/`;return r.startsWith(n)||e.startsWith(t.path)}),t?t.index:`0`},o=e=>{let t=n.value.find(t=>t.index===e);return t?t.path:``},s=e=>n.value.find(t=>t.index===e);return{menuRoutes:n,layoutRoute:i,getActiveIndexByPath:a,getRoutePathByIndex:o,getRouteByIndex:s}}var Ot=E({__name:`RecursiveMenuItem`,props:{item:{},parentIndex:{},childIndex:{}},emits:[`menu-select`],setup(e,{emit:t}){let r=t,i=e=>{r(`menu-select`,e)},a=e=>{let t=[];if(e.name){let n=e.name.split(`-`)[1];n&&t.push(`menu-item-${n}`)}else if(e.path){let n=e.path.split(`/`),r=n[n.length-1];r&&t.push(`menu-item-${r}`)}return t.join(` `)};return(e,t)=>{let r=n,s=be(`RecursiveMenuItem`,!0),c=Et,l=wt;return e.item.children&&e.item.children.length>0?(B(),x(c,{index:e.item.path,key:e.item.path},{title:Z(()=>[e.item.icon?(B(),x(r,{key:0},{default:Z(()=>[(B(),x(W(e.item.icon)))]),_:1})):S(``,!0),b(`span`,null,K(e.item.title),1)]),default:Z(()=>[(B(!0),C(o,null,H(e.item.children,(t,n)=>(B(),x(s,{key:t.path||n,item:t,"parent-index":e.item.path,"child-index":n,onMenuSelect:i},null,8,[`item`,`parent-index`,`child-index`]))),128))]),_:1},8,[`index`])):(B(),x(l,{index:e.item.path,key:e.item.path,class:L(a(e.item)),onClick:t[0]||=t=>i(e.item)},{default:Z(()=>[e.item.icon?(B(),x(r,{key:0},{default:Z(()=>[(B(),x(W(e.item.icon)))]),_:1})):S(``,!0),b(`span`,null,K(e.item.title),1)]),_:1},8,[`index`,`class`]))}}}),kt=l(Ot,[[`__scopeId`,`data-v-7f352830`]]);const At={key:0,class:`minimized-modal-menu`},jt={key:0,class:`minimized-group-title`},Mt=[`onClick`],Nt={key:0,class:`minimized-modal-title`};var Pt=E({__name:`MinimizedModalMenu`,props:{collapsed:{type:Boolean}},setup(e){let{minimizedMenuItems:t,getModalIcon:r,getModalColor:i}=Ee(),a=e=>{let t={Document:O,Operation:ge,User:Me,List:ue,Tickets:Se};return t[e]||O};return(e,s)=>{let c=Je,l=n,u=xe(`tooltip-overflow`);return J(t).length>0?(B(),C(`div`,At,[T(c,{class:`menu-divider`}),e.collapsed?S(``,!0):(B(),C(`div`,jt,[T(l,null,{default:Z(()=>[T(J(I))]),_:1}),s[0]||=b(`span`,null,`最小化窗口`,-1)])),(B(!0),C(o,null,H(J(t),t=>(B(),C(`div`,{key:`minimized-${t.id}`,class:L([`minimized-modal-item`,{collapsed:e.collapsed}]),onClick:t.onClick},[T(l,{style:R({color:J(i)(t.type)})},{default:Z(()=>[(B(),x(W(a(J(r)(t.type)))))]),_:2},1032,[`style`]),e.collapsed?S(``,!0):Q((B(),C(`span`,Nt,[w(K(t.title),1)])),[[u]])],10,Mt))),128))])):S(``,!0)}}}),Ft=l(Pt,[[`__scopeId`,`data-v-0f80ef92`]]);const It={class:`control-sidebar-wrapper`},Lt={class:`menu-container`};var Rt=E({__name:`ControlSidebar`,emits:[`collapse`],setup(e,{emit:t}){let r=ke(),i=t,a=Ae(),s=V(!1),c=V(`0`),l=V([]),{menuRoutes:u,layoutRoute:d,getRoutePathByIndex:f}=Dt(),h=()=>{s.value=!s.value,i(`collapse`,s.value)},g=e=>{if(c.value=e,!e.startsWith(`layout-`)&&e.startsWith(`menu-`)){let t=e.replace(`menu-`,``),n=f(t);n&&a.push(n)}},_=e=>{e.path&&(a.push(e.path),c.value=e.path)},v=e=>{l.value.includes(e)||l.value.push(e)},y=e=>{let t=l.value.indexOf(e);t!==-1&&l.value.splice(t,1)};return X(()=>r.path,e=>{if(e.startsWith(`/mas/`)){let e=`/`;l.value.includes(e)||l.value.push(e)}let t=u.value.find(t=>t.path===e);if(t){c.value=`menu-${t.index}`;return}let n=t=>{for(let r of t){if(r.path===e)return r.path;if(r.children){let e=n(r.children);if(e)return e}}return null},r=n(d.value);if(r){c.value=r;return}c.value=e},{immediate:!0}),(e,t)=>{let r=n,i=wt,a=Ct;return B(),C(`div`,It,[b(`div`,{class:`collapse-btn`,onClick:h},[T(r,{class:L([`collapse-icon`,{"is-collapsed":s.value}])},{default:Z(()=>[s.value?(B(),x(J(m),{key:1})):(B(),x(J(p),{key:0}))]),_:1},8,[`class`])]),b(`div`,Lt,[T(a,{"default-active":c.value,"default-opened-keys":l.value,collapse:s.value,class:`mas-menu`,"background-color":`#001529`,"text-color":`#fff`,"active-text-color":`#1890ff`,onSelect:g,onOpen:v,onClose:y},{default:Z(()=>[(B(!0),C(o,null,H(J(d),(e,t)=>(B(),x(kt,{key:`layout-${e.path||t}`,item:e,onMenuSelect:_},null,8,[`item`]))),128)),(B(!0),C(o,null,H(J(u),e=>(B(),x(i,{key:`menu-${e.index}`,index:`menu-${e.index}`,class:L(`menu-item-${e.name.split(`-`)[1]}`)},{default:Z(()=>[T(r,null,{default:Z(()=>[(B(),x(W(e.icon)))]),_:2},1024),b(`span`,null,K(e.title),1)]),_:2},1032,[`index`,`class`]))),128)),T(Ft,{collapsed:s.value},null,8,[`collapsed`])]),_:1},8,[`default-active`,`default-opened-keys`,`collapse`])])])}}}),zt=l(Rt,[[`__scopeId`,`data-v-516accc2`]]);const Bt={class:`human-agent-binding`},Vt={key:0,class:`binding-form`},Ht={class:`form-content`},Ut={class:`input-group`},Wt={class:`input-group`},Gt={key:1,class:`binding-summary`},Kt={class:`agent-name`};var qt=E({__name:`HumanAgentBinding`,props:{boundAgent:{}},emits:[`update:boundAgent`,`agentBound`],setup(e,{emit:n}){let o=e,s=n,c=Te(),l=De(),u=y(()=>o.boundAgent||c.currentHumanAgent),d=V(``),f=V(``),p=V(!1),m=V(`primary`),h=V(`确认`),_=V(null),v=()=>{_.value&&clearTimeout(_.value),_.value=window.setTimeout(()=>{m.value=`primary`,h.value=`确认`},2e3)},x=()=>{m.value=`success`,h.value=`绑定成功`,v()},S=()=>{m.value=`danger`,h.value=`绑定失败`,v()},ee=e=>{e.preventDefault();let t=e.dataTransfer?.getData(`text/plain`);if(t)try{let e=JSON.parse(t);e.type===`agent`&&e.agent_id&&(d.value=e.agent_id,i.success(`已自动填入Agent ID`))}catch(e){console.error(`解析拖拽数据失败:`,e)}},E=async()=>{if(!d.value||!f.value){i.warning(`请填写完整信息`);return}p.value=!0;try{let e=await g(d.value,f.value);if(!e.success){S(),i.error(e.message);return}let t=await A(`agent`),n=Object.keys(t).find(e=>t[e].agent_id===d.value);if(n&&t[n]){let r=t[n];if(!n.includes(`Human`)){S(),i.error(`该Agent不是人类操作端Agent`);return}s(`update:boundAgent`,r),s(`agentBound`,r);try{await c.setHumanAgentLogin(r.agent_id,r)}catch(e){console.error(`保存登录信息失败，但不影响绑定操作:`,e)}d.value=``,f.value=``,x(),i.success(e.message)}else S(),i.error(`Agent ID不存在`)}catch(e){console.error(`绑定失败:`,e),S(),i.error(`绑定失败，请检查Agent ID和密码`)}finally{p.value=!1}},D=async()=>{await c.clearHumanAgentLogin(),s(`update:boundAgent`,null),d.value=``,f.value=``,_.value&&clearTimeout(_.value),m.value=`primary`,h.value=`确认`},O=()=>{if(!u.value){i.warning(`没有绑定的Agent`);return}try{l.createModal({type:`agent`,title:`Agent详情 - [${u.value.role}]${u.value.name}`,id:u.value.agent_id,data:u.value,slots:{default:`AgentInfo`},componentProps:{agentData:u.value}})}catch(e){console.error(`Error creating modal:`,e),console.error(`Error stack:`,e instanceof Error?e.stack:`No stack trace`),i.error(`打开Agent详情失败`)}},k=e=>{let t={idle:`status-idle`,working:`status-working`,waiting:`status-waiting`,finished:`status-finished`,failed:`status-failed`};return t[e]||`status-idle`},te=e=>{let t={idle:`空闲`,working:`工作中`,waiting:`等待中`,finished:`已完成`,failed:`失败`};return t[e]||`未知`};return he(()=>{_.value&&clearTimeout(_.value)}),X(()=>c.currentHumanAgent,e=>{e&&!o.boundAgent&&s(`update:boundAgent`,e)},{immediate:!0}),(e,n)=>{let i=r,o=t,s=a;return B(),C(`div`,Bt,[u.value?(B(),C(`div`,Gt,[b(`div`,{class:`bound-agent-info`,onDblclick:O},[b(`div`,Kt,`[`+K(u.value.role)+`] `+K(u.value.name),1)],32),T(s,{content:`更换绑定的HumanAgent`,placement:`top`,"show-after":500},{default:Z(()=>[T(o,{size:`small`,onClick:D},{default:Z(()=>n[7]||=[w(` 更换 `)]),_:1,__:[7]})]),_:1})])):(B(),C(`div`,Vt,[n[6]||=b(`div`,{class:`form-title`},`绑定人类操作端`,-1),b(`div`,Ht,[b(`div`,Ut,[n[4]||=b(`label`,null,`Agent ID`,-1),T(i,{modelValue:d.value,"onUpdate:modelValue":n[0]||=e=>d.value=e,placeholder:`请输入要绑定的Agent ID (或拖入要绑定的Agent详细信息窗口)`,class:`agent-id-input`,clearable:``,onDrop:ee,onDragover:n[1]||=Ie(()=>{},[`prevent`]),onDragenter:n[2]||=Ie(()=>{},[`prevent`])},null,8,[`modelValue`])]),b(`div`,Wt,[n[5]||=b(`label`,null,`访问密码`,-1),T(i,{modelValue:f.value,"onUpdate:modelValue":n[3]||=e=>f.value=e,clearable:``,type:`password`,placeholder:`请输入要绑定的Agent的访问密码`,"show-password":``},null,8,[`modelValue`])]),T(o,{type:m.value,loading:p.value,disabled:!d.value||!f.value,class:`confirm-button`,onClick:E},{default:Z(()=>[w(K(h.value),1)]),_:1},8,[`type`,`loading`,`disabled`])])]))])}}}),Jt=l(qt,[[`__scopeId`,`data-v-c27d242a`]]);const Yt={class:`message-management`},Xt={key:0,class:`conversation-list`},Zt={class:`group-conversations`},Qt=[`onDblclick`],$t={class:`conversation-info`},en={class:`task-name`},tn={class:`participant-count`},nn={key:0,class:`unread-indicator`},rn={class:`private-conversations`},an=[`onDblclick`],on={class:`conversation-info`},sn={class:`task-name`},cn={class:`agent-info`},ln={key:0,class:`unread-indicator`},un={key:0,class:`empty-state`},dn={key:1,class:`unbound-state`};var fn=E({__name:`MessageManagement`,props:{boundAgent:{}},emits:[`openConversation`],setup(e,{emit:t}){let n=e,r=t,a=V([]),s=V([]),c=De(),l=Te(),u=e=>{let t=l.agents.find(t=>t.agent_id===e);return t?.name||e.slice(-6)},d=e=>{let t=l.agents.find(t=>t.agent_id===e);return t?.role||`未知`},f=async()=>{if(!n.boundAgent?.working_memory)return;let e=await A(`task`),t=[];for(let r of Object.keys(n.boundAgent.working_memory)){let n=Object.keys(e).find(t=>e[t].task_id===r);if(n&&e[n]){let r=e[n];r.shared_conversation_pool&&r.shared_conversation_pool.length>0&&t.push({taskId:r.task_id,taskName:r.task_name,participantCount:r.task_group.length,hasUnread:!1,messages:r.shared_conversation_pool})}}a.value=t},p=async()=>{if(!n.boundAgent?.conversation_pool?.conversation_privates)return;let e=await A(`agent`),t=await A(`task`),r=[];for(let[i,a]of Object.entries(n.boundAgent.conversation_pool.conversation_privates)){let n=Object.keys(e).find(t=>e[t].agent_id===i);if(n&&e[n]){let i=e[n];for(let[e,n]of Object.entries(a)){let a=Object.keys(t).find(n=>t[n].task_id===e);if(a&&t[a]&&Array.isArray(n)&&n.length>0){let e=t[a];r.push({agentId:i.agent_id,taskId:e.task_id,taskName:e.task_name,name:i.name,role:i.role,hasUnread:!1,messages:n})}}}}s.value=r},m=(e,t)=>{let a=n.boundAgent?.agent_id;if(!a){i.error(`HumanAgent ID 不存在`);return}if(e===`private`){let e=t.agentId;c.createModal({type:`chat`,title:`与 [${d(e)}]${u(e)} 的消息`,id:a,data:{humanAgentId:a,targetAgentId:e},componentProps:{humanAgentId:a,targetAgentId:e},size:{width:1e3,height:700}})}else if(e===`group`){let e=t;c.createModal({type:`chat`,title:`群聊 - ${e.taskName}`,id:`${a}-${e.taskId}`,data:{humanAgentId:a,taskId:e.taskId},componentProps:{humanAgentId:a,taskId:e.taskId},size:{width:1200,height:800}})}r(`openConversation`,{type:e,conversation:t,boundAgent:n.boundAgent})};return X(()=>n.boundAgent,async e=>{e?await Promise.all([f(),p()]):(a.value=[],s.value=[])},{immediate:!0,deep:!0}),(e,t)=>(B(),C(`div`,Yt,[t[2]||=b(`div`,{class:`header`},[b(`span`,{class:`title`},`消息管理`)],-1),e.boundAgent?(B(),C(`div`,Xt,[b(`div`,Zt,[(B(!0),C(o,null,H(a.value,e=>(B(),C(`div`,{key:e.taskId,class:`conversation-item group-conversation`,onDblclick:t=>m(`group`,e)},[b(`div`,$t,[b(`div`,en,K(e.taskName),1),b(`div`,tn,`[`+K(e.participantCount)+`]`,1)]),e.hasUnread?(B(),C(`div`,nn)):S(``,!0)],40,Qt))),128))]),b(`div`,rn,[(B(!0),C(o,null,H(s.value,e=>(B(),C(`div`,{key:`${e.agentId}-${e.taskId}`,class:`conversation-item private-conversation`,onDblclick:t=>m(`private`,e)},[b(`div`,on,[b(`div`,sn,K(e.taskName),1),b(`div`,cn,`[`+K(e.role)+`] `+K(e.name),1)]),e.hasUnread?(B(),C(`div`,ln)):S(``,!0)],40,an))),128))]),!a.value.length&&!s.value.length?(B(),C(`div`,un,t[0]||=[b(`div`,{class:`empty-icon`},`💬`,-1),b(`div`,{class:`empty-text`},`暂无对话`,-1)])):S(``,!0)])):(B(),C(`div`,dn,t[1]||=[b(`div`,{class:`unbound-icon`},`🔗`,-1),b(`div`,{class:`unbound-text`},`请先绑定HumanAgent`,-1)]))]))}}),pn=l(fn,[[`__scopeId`,`data-v-bf750c6b`]]);const mn={class:`global-message-notification`},hn={class:`header`},gn={class:`title`},_n={key:0},vn={class:`message-list`},yn={class:`message-content`},bn={key:0,class:`empty-message`};var xn=E({__name:`GlobalMessageNotification`,props:{boundAgent:{}},setup(e){let t=e,r=Te(),i=V(!1),s=V(!1),c=V(0),l=y(()=>t.boundAgent||r.currentHumanAgent||null),u=y(()=>{let e=l.value,t=e?.conversation_pool?.global_messages??e?.conversation?.global_messages??e?.conversation?.global_mesages??e?.conversation_pool?.global_mesages??[];return Array.isArray(t)?t:[]}),d=y(()=>[...u.value].reverse());X(u,e=>{e.length>c.value&&(s.value=!0,c.value=e.length)},{deep:!0});let f=()=>{i.value=!0,s.value=!1},p=()=>{i.value=!1};z(()=>{c.value=u.value.length});let m=e=>{if(i.value){let t=e.target;t.closest(`.global-message-notification`)||p()}};return z(()=>{document.addEventListener(`click`,m)}),he(()=>{document.removeEventListener(`click`,m)}),(e,t)=>{let r=n,c=a,l=xe(`tooltip-overflow`),u=xe(`markdown`);return B(),C(`div`,mn,[i.value?S(``,!0):(B(),C(`div`,{key:0,class:L([`notification-icon`,{"has-new-message":s.value}]),onClick:Ie(f,[`stop`])},[T(c,{content:`全局消息`,placement:`bottom`},{default:Z(()=>[T(r,{size:20},{default:Z(()=>[T(J(h))]),_:1})]),_:1})],2)),i.value?(B(),C(`div`,{key:1,class:`notification-expanded`,onClick:t[0]||=Ie(()=>{},[`stop`])},[b(`div`,hn,[Q((B(),C(`span`,gn,[t[1]||=w(`全局消息`),d.value.length?(B(),C(`span`,_n,` (`+K(d.value.length)+`)`,1)):S(``,!0)])),[[l]]),T(r,{class:`close-btn`,onClick:p},{default:Z(()=>[T(J(v))]),_:1})]),b(`div`,vn,[(B(!0),C(o,null,H(d.value,(e,t)=>(B(),C(`div`,{key:`message-${t}`,class:`message-item`},[Q(b(`div`,yn,null,512),[[u,{content:e,safe:!0,options:{breaks:!0,linkify:!0}}]])]))),128)),d.value.length?S(``,!0):(B(),C(`div`,bn,`暂无全局消息`))])])):S(``,!0),i.value?(B(),C(`div`,{key:2,class:`overlay`,onClick:p})):S(``,!0)])}}}),Sn=l(xn,[[`__scopeId`,`data-v-f5fc1e92`]]);const Cn={class:`secondary-workspace-wrapper`},wn={class:`agent-binding-section`},Tn={class:`message-management-section`};var En=E({__name:`SecondaryWorkspace`,emits:[`minimize`],setup(e){let t=V(null),n=e=>{t.value=e},r=e=>{};return(e,i)=>(B(),C(`div`,Cn,[b(`div`,wn,[T(Jt,{"bound-agent":t.value,"onUpdate:boundAgent":i[0]||=e=>t.value=e,onAgentBound:n},null,8,[`bound-agent`])]),b(`div`,Tn,[T(pn,{"bound-agent":t.value,onOpenConversation:r},null,8,[`bound-agent`])]),i[1]||=b(`div`,{class:`multi-function-section`},[b(`div`,{class:`placeholder`},`多功能区 - 待开发`)],-1),i[2]||=b(`div`,{class:`tool-usage-section`},[b(`div`,{class:`placeholder`},`工具使用区 - 待开发`)],-1),T(Sn,{"bound-agent":t.value,class:`notification-component`},null,8,[`bound-agent`])]))}}),Dn=l(En,[[`__scopeId`,`data-v-b38295fd`]]);const On={class:`mas-layout`};var kn=E({__name:`index`,setup(e){let t=V(!1),n=V(800),r=V(300),i=V(1100),a=V(!1),o=V(0),s=V(0),c=e=>{t.value=e},l=e=>{a.value=!0,o.value=e.clientX,s.value=n.value,document.addEventListener(`mousemove`,d,{passive:!0}),document.addEventListener(`mouseup`,f),document.body.style.cursor=`col-resize`,document.body.style.userSelect=`none`,document.body.classList.add(`resizing`)},u=(e,t)=>{let n=null,r=0;return(...i)=>{let a=Date.now();a-r>t?(e(...i),r=a):(n&&clearTimeout(n),n=window.setTimeout(()=>e(...i),t-(a-r)))}},d=u(e=>{if(!a.value)return;let t=e.clientX-o.value,c=s.value+t,l=i.value-c;c>=400&&l>=250&&requestAnimationFrame(()=>{n.value=c,r.value=l})},16),f=()=>{a.value=!1,document.removeEventListener(`mousemove`,d),document.removeEventListener(`mouseup`,f),document.body.style.cursor=``,document.body.style.userSelect=``,document.body.classList.remove(`resizing`)};return z(()=>{let e=()=>{i.value=window.innerWidth-(t.value?64:200);let e=300,a=i.value-e;a>=400?(r.value=e,n.value=a):(n.value=400,r.value=Math.max(250,i.value-400))};e(),window.addEventListener(`resize`,e,{passive:!0}),he(()=>{window.removeEventListener(`resize`,e)})}),(e,i)=>{let a=be(`router-view`);return B(),C(`div`,On,[b(`div`,{class:L([`control-sidebar`,{"is-collapsed":t.value}])},[T(zt,{onCollapse:c})],2),b(`div`,{class:`main-workspace`,style:R({width:`${n.value}px`})},[T(a)],4),b(`div`,{class:`workspace-divider`,onMousedown:l},i[0]||=[b(`div`,{class:`divider-handle`},[b(`div`,{class:`divider-line`})],-1)],32),b(`div`,{class:`secondary-workspace`,style:R({width:`${r.value}px`})},[T(Dn)],4)])}}}),An=l(kn,[[`__scopeId`,`data-v-37c994ba`]]);export{An as default};