import{CHANGE_EVENT as e,EVENT_CODE as t,ElButton as n,ElIcon as r,ElMessage as i,ElTooltip as a,Fragment as o,INPUT_EVENT as s,NOOP as c,TinyColor as l,Transition as u,TypeComponentsMap as d,UPDATE_MODEL_EVENT as f,ValidateComponentsMap as p,__plugin_vue_export_helper_default as m,_export_sfc as h,addClass as g,arrow_down_default as _,arrow_left_default as v,arrow_right_default as y,attachMasLinkDelegation as b,bell_default as x,bindHumanAgent as S,buildProps as C,circle_close_default as ee,close_default as w,computed as T,createBaseVNode as E,createBlock as D,createCommentVNode as O,createElementBlock as k,createTextVNode as A,createVNode as j,debugWarn as te,defineComponent as M,definePropType as N,document_default as ne,flattedChildren as P,fromPairs_default as re,getCurrentInstance as ie,getStatesApi as ae,h as F,hasClass as oe,hide_default as se,iconPropType as I,inject as ce,isArray as le,isClient as ue,isElement as de,isFocusable as fe,isFunction as L,isNil_default as pe,isNumber as me,isObject as he,isPropAbsent as ge,isString as R,isUndefined as _e,isVNode as ve,lib_default as ye,list_default as be,mergeProps as xe,minus_default as Se,more_default as Ce,mutable as we,nextTick as z,normalizeClass as B,normalizeStyle as V,onBeforeUnmount as Te,onMounted as H,onUnmounted as Ee,openBlock as U,operation_default as De,provide as Oe,reactive as ke,ref as W,removeClass as Ae,render as je,renderList as G,renderSlot as K,resolveComponent as Me,resolveDirective as Ne,resolveDynamicComponent as q,shallowRef as Pe,throwError as Fe,tickets_default as Ie,toDisplayString as J,toHandlers as Le,toRef as Re,transformMasLinkNodes as ze,triggerEvent as Be,unref as Y,useAriaProps as Ve,useAttrs as He,useEventListener as Ue,useFormDisabled as We,useFormItem as Ge,useFormItemInputId as Ke,useFormSize as qe,useGlobalComponentSettings as Je,useMasStore as Ye,useModalMenuIntegration as Xe,useModalStore as Ze,useNamespace as X,useResizeObserver as Qe,useRoute as $e,useRouter as et,useSizeProp as tt,useSlots as nt,useTimeoutFn as rt,user_default as it,vShow as at,view_default as ot,watch as Z,watchEffect as st,withCtx as Q,withDirectives as ct,withInstall as lt,withInstallFunction as ut,withModifiers as dt,withNoopInstall as ft}from"./index-_7negxDj.js";const pt=()=>ue&&/firefox/i.test(window.navigator.userAgent);let $;const mt={height:`0`,visibility:`hidden`,overflow:pt()?``:`hidden`,position:`absolute`,"z-index":`-1000`,top:`0`,right:`0`},ht=[`letter-spacing`,`line-height`,`padding-top`,`padding-bottom`,`font-family`,`font-weight`,`font-size`,`text-rendering`,`text-transform`,`width`,`text-indent`,`padding-left`,`padding-right`,`border-width`,`box-sizing`];function gt(e){let t=window.getComputedStyle(e),n=t.getPropertyValue(`box-sizing`),r=Number.parseFloat(t.getPropertyValue(`padding-bottom`))+Number.parseFloat(t.getPropertyValue(`padding-top`)),i=Number.parseFloat(t.getPropertyValue(`border-bottom-width`))+Number.parseFloat(t.getPropertyValue(`border-top-width`)),a=ht.map(e=>[e,t.getPropertyValue(e)]);return{contextStyle:a,paddingSize:r,borderSize:i,boxSizing:n}}function _t(e,t=1,n){var r;$||($=document.createElement(`textarea`),document.body.appendChild($));let{paddingSize:i,borderSize:a,boxSizing:o,contextStyle:s}=gt(e);s.forEach(([e,t])=>$?.style.setProperty(e,t)),Object.entries(mt).forEach(([e,t])=>$?.style.setProperty(e,t,`important`)),$.value=e.value||e.placeholder||``;let c=$.scrollHeight,l={};o===`border-box`?c+=a:o===`content-box`&&(c-=i),$.value=``;let u=$.scrollHeight-i;if(me(t)){let e=u*t;o===`border-box`&&(e=e+i+a),c=Math.max(e,c),l.minHeight=`${e}px`}if(me(n)){let e=u*n;o===`border-box`&&(e=e+i+a),c=Math.min(e,c)}return l.height=`${c}px`,(r=$.parentNode)==null||r.removeChild($),$=void 0,l}const vt=C({id:{type:String,default:void 0},size:tt,disabled:Boolean,modelValue:{type:N([String,Number,Object]),default:``},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:`text`},resize:{type:String,values:[`none`,`both`,`horizontal`,`vertical`]},autosize:{type:N([Boolean,Object]),default:!1},autocomplete:{type:String,default:`off`},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:I},prefixIcon:{type:I},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:N([Object,Array,String]),default:()=>we({})},autofocus:Boolean,rows:{type:Number,default:2},...Ve([`ariaLabel`])}),yt={[f]:e=>R(e),input:e=>R(e),change:e=>R(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},bt=[`class`,`style`],xt=/^on[A-Z]/,St=(e={})=>{let{excludeListeners:t=!1,excludeKeys:n}=e,r=T(()=>(n?.value||[]).concat(bt)),i=ie();return i?T(()=>{var e;return re(Object.entries((e=i.proxy)?.$attrs).filter(([e])=>!r.value.includes(e)&&!(t&&xt.test(e))))}):(te(`use-attrs`,`getCurrentInstance() returned null. useAttrs() must be called at the top of a setup function`),T(()=>({})))};function Ct(e,{beforeFocus:t,afterFocus:n,beforeBlur:r,afterBlur:i}={}){let a=ie(),{emit:o}=a,s=Pe(),c=We(),l=W(!1),u=e=>{let r=L(t)?t(e):!1;r||l.value||(l.value=!0,o(`focus`,e),n?.())},d=e=>{var t;let n=L(r)?r(e):!1;n||e.relatedTarget&&(t=s.value)?.contains(e.relatedTarget)||(l.value=!1,o(`blur`,e),i?.())},f=t=>{var n,r;(n=s.value)?.contains(document.activeElement)&&s.value!==document.activeElement||fe(t.target)||c.value||(r=e.value)==null||r.focus()};return Z([s,c],([e,t])=>{e&&(t?e.removeAttribute(`tabindex`):e.setAttribute(`tabindex`,`-1`))}),Ue(s,`focus`,u,!0),Ue(s,`blur`,d,!0),Ue(s,`click`,f,!0),{isFocused:l,wrapperRef:s,handleFocus:u,handleBlur:d}}const wt=e=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(e);function Tt({afterComposition:e,emit:t}){let n=W(!1),r=e=>{t?.(`compositionstart`,e),n.value=!0},i=e=>{var r;t?.(`compositionupdate`,e);let i=(r=e.target)?.value,a=i[i.length-1]||``;n.value=!wt(a)},a=r=>{t?.(`compositionend`,r),n.value&&(n.value=!1,z(()=>e(r)))},o=e=>{e.type===`compositionend`?a(e):i(e)};return{isComposing:n,handleComposition:o,handleCompositionStart:r,handleCompositionUpdate:i,handleCompositionEnd:a}}function Et(e){let t;function n(){if(e.value==null)return;let{selectionStart:n,selectionEnd:r,value:i}=e.value;if(n==null||r==null)return;let a=i.slice(0,Math.max(0,n)),o=i.slice(Math.max(0,r));t={selectionStart:n,selectionEnd:r,value:i,beforeTxt:a,afterTxt:o}}function r(){if(e.value==null||t==null)return;let{value:n}=e.value,{beforeTxt:r,afterTxt:i,selectionStart:a}=t;if(r==null||i==null||a==null)return;let o=n.length;if(n.endsWith(i))o=n.length-i.length;else if(n.startsWith(r))o=r.length;else{let e=r[a-1],t=n.indexOf(e,a-1);t!==-1&&(o=t+1)}e.value.setSelectionRange(o,o)}return[n,r]}const Dt=`ElInput`,Ot=M({name:Dt,inheritAttrs:!1}),kt=M({...Ot,props:vt,emits:yt,setup(t,{expose:n,emit:i}){let a=t,l=He(),u=St(),d=nt(),m=T(()=>[a.type===`textarea`?S.b():x.b(),x.m(y.value),x.is(`disabled`,b.value),x.is(`exceed`,ve.value),{[x.b(`group`)]:d.prepend||d.append,[x.m(`prefix`)]:d.prefix||a.prefixIcon,[x.m(`suffix`)]:d.suffix||a.suffixIcon||a.clearable||a.showPassword,[x.bm(`suffix`,`password-clear`)]:me.value&&ge.value,[x.b(`hidden`)]:a.type===`hidden`},l.class]),h=T(()=>[x.e(`wrapper`),x.is(`focus`,ie.value)]),{form:g,formItem:_}=Ge(),{inputId:v}=Ke(a,{formItemContext:_}),y=qe(),b=We(),x=X(`input`),S=X(`textarea`),C=Pe(),w=Pe(),A=W(!1),M=W(!1),N=W(),ne=Pe(a.inputStyle),P=T(()=>C.value||w.value),{wrapperRef:re,isFocused:ie,handleFocus:ae,handleBlur:F}=Ct(P,{beforeFocus(){return b.value},afterBlur(){var e;a.validateEvent&&((e=_?.validate)==null||e.call(_,`blur`).catch(e=>te(e)))}}),oe=T(()=>{var e;return(e=g?.statusIcon)??!1}),I=T(()=>_?.validateState||``),ce=T(()=>I.value&&p[I.value]),le=T(()=>M.value?ot:se),de=T(()=>[l.style]),fe=T(()=>[a.inputStyle,ne.value,{resize:a.resize}]),L=T(()=>pe(a.modelValue)?``:String(a.modelValue)),me=T(()=>a.clearable&&!b.value&&!a.readonly&&!!L.value&&(ie.value||A.value)),ge=T(()=>a.showPassword&&!b.value&&!!L.value),R=T(()=>a.showWordLimit&&!!a.maxlength&&(a.type===`text`||a.type===`textarea`)&&!b.value&&!a.readonly&&!a.showPassword),_e=T(()=>L.value.length),ve=T(()=>!!R.value&&_e.value>Number(a.maxlength)),ye=T(()=>!!d.suffix||!!a.suffixIcon||me.value||a.showPassword||R.value||!!I.value&&oe.value),[be,Se]=Et(C);Qe(w,e=>{if(Te(),!R.value||a.resize!==`both`)return;let t=e[0],{width:n}=t.contentRect;N.value={right:`calc(100% - ${n+15+6}px)`}});let Ce=()=>{let{type:e,autosize:t}=a;if(!(!ue||e!==`textarea`||!w.value))if(t){let e=he(t)?t.minRows:void 0,n=he(t)?t.maxRows:void 0,r=_t(w.value,e,n);ne.value={overflowY:`hidden`,...r},z(()=>{w.value.offsetHeight,ne.value=r})}else ne.value={minHeight:_t(w.value).minHeight}},we=e=>{let t=!1;return()=>{var n;if(t||!a.autosize)return;let r=(n=w.value)?.offsetParent===null;r||(e(),t=!0)}},Te=we(Ce),Ee=()=>{let e=P.value,t=a.formatter?a.formatter(L.value):L.value;!e||e.value===t||(e.value=t)},De=async e=>{be();let{value:t}=e.target;if(a.formatter&&a.parser&&(t=a.parser(t)),!ke.value){if(t===L.value){Ee();return}i(f,t),i(s,t),await z(),Ee(),Se()}},Oe=t=>{let{value:n}=t.target;a.formatter&&a.parser&&(n=a.parser(n)),i(e,n)},{isComposing:ke,handleCompositionStart:Ae,handleCompositionUpdate:je,handleCompositionEnd:G}=Tt({emit:i,afterComposition:De}),Me=()=>{be(),M.value=!M.value,setTimeout(Se)},Ne=()=>{var e;return(e=P.value)?.focus()},Fe=()=>{var e;return(e=P.value)?.blur()},Ie=e=>{A.value=!1,i(`mouseleave`,e)},Le=e=>{A.value=!0,i(`mouseenter`,e)},ze=e=>{i(`keydown`,e)},Be=()=>{var e;(e=P.value)==null||e.select()},Ve=()=>{i(f,``),i(e,``),i(`clear`),i(s,``)};return Z(()=>a.modelValue,()=>{var e;z(()=>Ce()),a.validateEvent&&((e=_?.validate)==null||e.call(_,`change`).catch(e=>te(e)))}),Z(L,()=>Ee()),Z(()=>a.type,async()=>{await z(),Ee(),Ce()}),H(()=>{!a.formatter&&a.parser&&te(Dt,`If you set the parser, you also need to set the formatter.`),Ee(),z(Ce)}),n({input:C,textarea:w,ref:P,textareaStyle:fe,autosize:Re(a,`autosize`),isComposing:ke,focus:Ne,blur:Fe,select:Be,clear:Ve,resizeTextarea:Ce}),(e,t)=>(U(),k(`div`,{class:B([Y(m),{[Y(x).bm(`group`,`append`)]:e.$slots.append,[Y(x).bm(`group`,`prepend`)]:e.$slots.prepend}]),style:V(Y(de)),onMouseenter:Le,onMouseleave:Ie},[O(` input `),e.type===`textarea`?(U(),k(o,{key:1},[O(` textarea `),E(`textarea`,xe({id:Y(v),ref_key:`textarea`,ref:w,class:[Y(S).e(`inner`),Y(x).is(`focus`,Y(ie))]},Y(u),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:Y(b),readonly:e.readonly,autocomplete:e.autocomplete,style:Y(fe),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:Y(Ae),onCompositionupdate:Y(je),onCompositionend:Y(G),onInput:De,onFocus:Y(ae),onBlur:Y(F),onChange:Oe,onKeydown:ze}),null,16,[`id`,`minlength`,`maxlength`,`tabindex`,`disabled`,`readonly`,`autocomplete`,`aria-label`,`placeholder`,`form`,`autofocus`,`rows`,`role`,`onCompositionstart`,`onCompositionupdate`,`onCompositionend`,`onFocus`,`onBlur`]),Y(R)?(U(),k(`span`,{key:0,style:V(N.value),class:B(Y(x).e(`count`))},J(Y(_e))+` / `+J(e.maxlength),7)):O(`v-if`,!0)],64)):(U(),k(o,{key:0},[O(` prepend slot `),e.$slots.prepend?(U(),k(`div`,{key:0,class:B(Y(x).be(`group`,`prepend`))},[K(e.$slots,`prepend`)],2)):O(`v-if`,!0),E(`div`,{ref_key:`wrapperRef`,ref:re,class:B(Y(h))},[O(` prefix slot `),e.$slots.prefix||e.prefixIcon?(U(),k(`span`,{key:0,class:B(Y(x).e(`prefix`))},[E(`span`,{class:B(Y(x).e(`prefix-inner`))},[K(e.$slots,`prefix`),e.prefixIcon?(U(),D(Y(r),{key:0,class:B(Y(x).e(`icon`))},{default:Q(()=>[(U(),D(q(e.prefixIcon)))]),_:1},8,[`class`])):O(`v-if`,!0)],2)],2)):O(`v-if`,!0),E(`input`,xe({id:Y(v),ref_key:`input`,ref:C,class:Y(x).e(`inner`)},Y(u),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?M.value?`text`:`password`:e.type,disabled:Y(b),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:Y(Ae),onCompositionupdate:Y(je),onCompositionend:Y(G),onInput:De,onChange:Oe,onKeydown:ze}),null,16,[`id`,`minlength`,`maxlength`,`type`,`disabled`,`readonly`,`autocomplete`,`tabindex`,`aria-label`,`placeholder`,`form`,`autofocus`,`role`,`onCompositionstart`,`onCompositionupdate`,`onCompositionend`]),O(` suffix slot `),Y(ye)?(U(),k(`span`,{key:1,class:B(Y(x).e(`suffix`))},[E(`span`,{class:B(Y(x).e(`suffix-inner`))},[!Y(me)||!Y(ge)||!Y(R)?(U(),k(o,{key:0},[K(e.$slots,`suffix`),e.suffixIcon?(U(),D(Y(r),{key:0,class:B(Y(x).e(`icon`))},{default:Q(()=>[(U(),D(q(e.suffixIcon)))]),_:1},8,[`class`])):O(`v-if`,!0)],64)):O(`v-if`,!0),Y(me)?(U(),D(Y(r),{key:1,class:B([Y(x).e(`icon`),Y(x).e(`clear`)]),onMousedown:dt(Y(c),[`prevent`]),onClick:Ve},{default:Q(()=>[j(Y(ee))]),_:1},8,[`class`,`onMousedown`])):O(`v-if`,!0),Y(ge)?(U(),D(Y(r),{key:2,class:B([Y(x).e(`icon`),Y(x).e(`password`)]),onClick:Me},{default:Q(()=>[(U(),D(q(Y(le))))]),_:1},8,[`class`])):O(`v-if`,!0),Y(R)?(U(),k(`span`,{key:3,class:B(Y(x).e(`count`))},[E(`span`,{class:B(Y(x).e(`count-inner`))},J(Y(_e))+` / `+J(e.maxlength),3)],2)):O(`v-if`,!0),Y(I)&&Y(ce)&&Y(oe)?(U(),D(Y(r),{key:4,class:B([Y(x).e(`icon`),Y(x).e(`validateIcon`),Y(x).is(`loading`,Y(I)===`validating`)])},{default:Q(()=>[(U(),D(q(Y(ce))))]),_:1},8,[`class`])):O(`v-if`,!0)],2)],2)):O(`v-if`,!0)],2),O(` append slot `),e.$slots.append?(U(),k(`div`,{key:1,class:B(Y(x).be(`group`,`append`))},[K(e.$slots,`append`)],2)):O(`v-if`,!0)],64))],38))}});var At=h(kt,[[`__file`,`input.vue`]]);const jt=lt(At),Mt=new Map;if(ue){let e;document.addEventListener(`mousedown`,t=>e=t),document.addEventListener(`mouseup`,t=>{if(e){for(let n of Mt.values())for(let{documentHandler:r}of n)r(t,e);e=void 0}})}function Nt(e,t){let n=[];return le(t.arg)?n=t.arg:de(t.arg)&&n.push(t.arg),function(r,i){let a=t.instance.popperRef,o=r.target,s=i?.target,c=!t||!t.instance,l=!o||!s,u=e.contains(o)||e.contains(s),d=e===o,f=n.length&&n.some(e=>e?.contains(o))||n.length&&n.includes(s),p=a&&(a.contains(o)||a.contains(s));c||l||u||d||f||p||t.value(r,i)}}const Pt={beforeMount(e,t){Mt.has(e)||Mt.set(e,[]),Mt.get(e).push({documentHandler:Nt(e,t),bindingFn:t.value})},updated(e,t){Mt.has(e)||Mt.set(e,[]);let n=Mt.get(e),r=n.findIndex(e=>e.bindingFn===t.oldValue),i={documentHandler:Nt(e,t),bindingFn:t.value};r>=0?n.splice(r,1,i):n.push(i)},unmounted(e){Mt.delete(e)}},Ft=M({name:`ElCollapseTransition`}),It=M({...Ft,setup(e){let t=X(`collapse-transition`),n=e=>{e.style.maxHeight=``,e.style.overflow=e.dataset.oldOverflow,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom},r={beforeEnter(e){e.dataset||={},e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.style.height&&(e.dataset.elExistsHeight=e.style.height),e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0},enter(e){requestAnimationFrame(()=>{e.dataset.oldOverflow=e.style.overflow,e.dataset.elExistsHeight?e.style.maxHeight=e.dataset.elExistsHeight:e.scrollHeight===0?e.style.maxHeight=0:e.style.maxHeight=`${e.scrollHeight}px`,e.style.paddingTop=e.dataset.oldPaddingTop,e.style.paddingBottom=e.dataset.oldPaddingBottom,e.style.overflow=`hidden`})},afterEnter(e){e.style.maxHeight=``,e.style.overflow=e.dataset.oldOverflow},enterCancelled(e){n(e)},beforeLeave(e){e.dataset||={},e.dataset.oldPaddingTop=e.style.paddingTop,e.dataset.oldPaddingBottom=e.style.paddingBottom,e.dataset.oldOverflow=e.style.overflow,e.style.maxHeight=`${e.scrollHeight}px`,e.style.overflow=`hidden`},leave(e){e.scrollHeight!==0&&(e.style.maxHeight=0,e.style.paddingTop=0,e.style.paddingBottom=0)},afterLeave(e){n(e)},leaveCancelled(e){n(e)}};return(e,n)=>(U(),D(u,xe({name:Y(t).b()},Le(r)),{default:Q(()=>[K(e.$slots,`default`)]),_:3},16,[`name`]))}});var Lt=h(It,[[`__file`,`collapse-transition.vue`]]);const Rt=lt(Lt),zt=C({direction:{type:String,values:[`horizontal`,`vertical`],default:`horizontal`},contentPosition:{type:String,values:[`left`,`center`,`right`],default:`center`},borderStyle:{type:N(String),default:`solid`}}),Bt=M({name:`ElDivider`}),Vt=M({...Bt,props:zt,setup(e){let t=e,n=X(`divider`),r=T(()=>n.cssVar({"border-style":t.borderStyle}));return(e,t)=>(U(),k(`div`,{class:B([Y(n).b(),Y(n).m(e.direction)]),style:V(Y(r)),role:`separator`},[e.$slots.default&&e.direction!==`vertical`?(U(),k(`div`,{key:0,class:B([Y(n).e(`text`),Y(n).is(e.contentPosition)])},[K(e.$slots,`default`)],2)):O(`v-if`,!0)],6))}});var Ht=h(Vt,[[`__file`,`divider.vue`]]);const Ut=lt(Ht);var Wt=class{constructor(e,t){this.parent=e,this.domNode=t,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll(`li`),this.addListeners()}gotoSubIndex(e){e===this.subMenuItems.length?e=0:e<0&&(e=this.subMenuItems.length-1),this.subMenuItems[e].focus(),this.subIndex=e}addListeners(){let e=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,n=>{n.addEventListener(`keydown`,n=>{let r=!1;switch(n.code){case t.down:this.gotoSubIndex(this.subIndex+1),r=!0;break;case t.up:this.gotoSubIndex(this.subIndex-1),r=!0;break;case t.tab:Be(e,`mouseleave`);break;case t.enter:case t.numpadEnter:case t.space:r=!0,n.currentTarget.click();break}return r&&(n.preventDefault(),n.stopPropagation()),!1})})}},Gt=class{constructor(e,t){this.domNode=e,this.submenu=null,this.submenu=null,this.init(t)}init(e){this.domNode.setAttribute(`tabindex`,`0`);let t=this.domNode.querySelector(`.${e}-menu`);t&&(this.submenu=new Wt(this,t)),this.addListeners()}addListeners(){this.domNode.addEventListener(`keydown`,e=>{let n=!1;switch(e.code){case t.down:Be(e.currentTarget,`mouseenter`),this.submenu&&this.submenu.gotoSubIndex(0),n=!0;break;case t.up:Be(e.currentTarget,`mouseenter`),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),n=!0;break;case t.tab:Be(e.currentTarget,`mouseleave`);break;case t.enter:case t.numpadEnter:case t.space:n=!0,e.currentTarget.click();break}n&&e.preventDefault()})}},Kt=class{constructor(e,t){this.domNode=e,this.init(t)}init(e){let t=this.domNode.childNodes;Array.from(t).forEach(t=>{t.nodeType===1&&new Gt(t,e)})}};const qt=M({name:`ElMenuCollapseTransition`}),Jt=M({...qt,setup(e){let t=X(`menu`),n={onBeforeEnter:e=>e.style.opacity=`0.2`,onEnter(e,n){g(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=`1`,n()},onAfterEnter(e){Ae(e,`${t.namespace.value}-opacity-transition`),e.style.opacity=``},onBeforeLeave(e){e.dataset||={},oe(e,t.m(`collapse`))?(Ae(e,t.m(`collapse`)),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),g(e,t.m(`collapse`))):(g(e,t.m(`collapse`)),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),Ae(e,t.m(`collapse`))),e.style.width=`${e.scrollWidth}px`,e.style.overflow=`hidden`},onLeave(e){g(e,`horizontal-collapse-transition`),e.style.width=`${e.dataset.scrollWidth}px`}};return(e,t)=>(U(),D(u,xe({mode:`out-in`},Y(n)),{default:Q(()=>[K(e.$slots,`default`)]),_:3},16))}});var Yt=h(Jt,[[`__file`,`menu-collapse-transition.vue`]]);function Xt(e,t){let n=T(()=>{let n=e.parent,r=[t.value];for(;n.type.name!==`ElMenu`;)n.props.index&&r.unshift(n.props.index),n=n.parent;return r}),r=T(()=>{let t=e.parent;for(;t&&![`ElMenu`,`ElSubMenu`].includes(t.type.name);)t=t.parent;return t});return{parentMenu:r,indexPath:n}}function Zt(e){let t=T(()=>{let t=e.backgroundColor;return t?new l(t).shade(20).toString():``});return t}const Qt=(e,t)=>{let n=X(`menu`);return T(()=>n.cssVarBlock({"text-color":e.textColor||``,"hover-text-color":e.textColor||``,"bg-color":e.backgroundColor||``,"hover-bg-color":Zt(e).value||``,"active-color":e.activeTextColor||``,level:`${t}`}))},$t=`rootMenu`,en=`subMenu:`,tn=C({index:{type:String,required:!0},showTimeout:Number,hideTimeout:Number,popperClass:String,disabled:Boolean,teleported:{type:Boolean,default:void 0},popperOffset:Number,expandCloseIcon:{type:I},expandOpenIcon:{type:I},collapseCloseIcon:{type:I},collapseOpenIcon:{type:I}}),nn=`ElSubMenu`;var rn=M({name:nn,props:tn,setup(e,{slots:t,expose:n}){let i=ie(),{indexPath:s,parentMenu:c}=Xt(i,T(()=>e.index)),l=X(`menu`),u=X(`sub-menu`),d=ce($t);d||Fe(nn,`can not inject root menu`);let f=ce(`${en}${c.value.uid}`);f||Fe(nn,`can not inject sub menu`);let p=W({}),m=W({}),h,g=W(!1),v=W(),b=W(),x=T(()=>k.value===`horizontal`&&C.value?`bottom-start`:`right-start`),S=T(()=>k.value===`horizontal`&&C.value||k.value===`vertical`&&!d.props.collapse?e.expandCloseIcon&&e.expandOpenIcon?D.value?e.expandOpenIcon:e.expandCloseIcon:_:e.collapseCloseIcon&&e.collapseOpenIcon?D.value?e.collapseOpenIcon:e.collapseCloseIcon:y),C=T(()=>f.level===0),ee=T(()=>{let t=e.teleported;return _e(t)?C.value:t}),w=T(()=>d.props.collapse?`${l.namespace.value}-zoom-in-left`:`${l.namespace.value}-zoom-in-top`),E=T(()=>k.value===`horizontal`&&C.value?[`bottom-start`,`bottom-end`,`top-start`,`top-end`,`right-start`,`left-start`]:[`right-start`,`right`,`right-end`,`left-start`,`bottom-start`,`bottom-end`,`top-start`,`top-end`]),D=T(()=>d.openedMenus.includes(e.index)),O=T(()=>[...Object.values(p.value),...Object.values(m.value)].some(({active:e})=>e)),k=T(()=>d.props.mode),A=T(()=>d.props.persistent),j=ke({index:e.index,indexPath:s,active:O}),te=Qt(d.props,f.level+1),M=T(()=>{var t;return(t=e.popperOffset)??d.props.popperOffset}),N=T(()=>{var t;return(t=e.popperClass)??d.props.popperClass}),ne=T(()=>{var t;return(t=e.showTimeout)??d.props.showTimeout}),P=T(()=>{var t;return(t=e.hideTimeout)??d.props.hideTimeout}),re=()=>{var e,t,n;return(n=(t=(e=b.value)?.popperRef)?.popperInstanceRef)?.destroy()},ae=e=>{e||re()},oe=()=>{d.props.menuTrigger===`hover`&&d.props.mode===`horizontal`||d.props.collapse&&d.props.mode===`vertical`||e.disabled||d.handleSubMenuClick({index:e.index,indexPath:s.value,active:O.value})},se=(t,n=ne.value)=>{var r;if(t.type!==`focus`){if(d.props.menuTrigger===`click`&&d.props.mode===`horizontal`||!d.props.collapse&&d.props.mode===`vertical`||e.disabled){f.mouseInChild.value=!0;return}f.mouseInChild.value=!0,h?.(),{stop:h}=rt(()=>{d.openMenu(e.index,s.value)},n),ee.value&&((r=c.value.vnode.el)==null||r.dispatchEvent(new MouseEvent(`mouseenter`)))}},I=(t=!1)=>{var n;if(d.props.menuTrigger===`click`&&d.props.mode===`horizontal`||!d.props.collapse&&d.props.mode===`vertical`){f.mouseInChild.value=!1;return}h?.(),f.mouseInChild.value=!1,{stop:h}=rt(()=>!g.value&&d.closeMenu(e.index,s.value),P.value),ee.value&&t&&((n=f.handleMouseleave)==null||n.call(f,!0))};Z(()=>d.props.collapse,e=>ae(!!e));{let e=e=>{m.value[e.index]=e},t=e=>{delete m.value[e.index]};Oe(`${en}${i.uid}`,{addSubMenu:e,removeSubMenu:t,handleMouseleave:I,mouseInChild:g,level:f.level+1})}return n({opened:D}),H(()=>{d.addSubMenu(j),f.addSubMenu(j)}),Te(()=>{f.removeSubMenu(j),d.removeSubMenu(j)}),()=>{var n;let s=[(n=t.title)?.call(t),F(r,{class:u.e(`icon-arrow`),style:{transform:D.value?e.expandCloseIcon&&e.expandOpenIcon||e.collapseCloseIcon&&e.collapseOpenIcon&&d.props.collapse?`none`:`rotateZ(180deg)`:`none`}},{default:()=>R(S.value)?F(i.appContext.components[S.value]):F(S.value)})],c=d.isMenuPopup?F(a,{ref:b,visible:D.value,effect:`light`,pure:!0,offset:M.value,showArrow:!1,persistent:A.value,popperClass:N.value,placement:x.value,teleported:ee.value,fallbackPlacements:E.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var e;return F(`div`,{class:[l.m(k.value),l.m(`popup-container`),N.value],onMouseenter:e=>se(e,100),onMouseleave:()=>I(!0),onFocus:e=>se(e,100)},[F(`ul`,{class:[l.b(),l.m(`popup`),l.m(`popup-${x.value}`)],style:te.value},[(e=t.default)?.call(t)])])},default:()=>F(`div`,{class:u.e(`title`),onClick:oe},s)}):F(o,{},[F(`div`,{class:u.e(`title`),ref:v,onClick:oe},s),F(Rt,{},{default:()=>{var e;return ct(F(`ul`,{role:`menu`,class:[l.b(),l.m(`inline`)],style:te.value},[(e=t.default)?.call(t)]),[[at,D.value]])}})]);return F(`li`,{class:[u.b(),u.is(`active`,O.value),u.is(`opened`,D.value),u.is(`disabled`,e.disabled)],role:`menuitem`,ariaHaspopup:!0,ariaExpanded:D.value,onMouseenter:se,onMouseleave:()=>I(),onFocus:se},[c])}}});const an=C({mode:{type:String,values:[`horizontal`,`vertical`],default:`vertical`},defaultActive:{type:String,default:``},defaultOpeneds:{type:N(Array),default:()=>we([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:[`hover`,`click`],default:`hover`},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,closeOnClickOutside:Boolean,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperOffset:{type:Number,default:6},ellipsisIcon:{type:I,default:()=>Ce},popperEffect:{type:N(String),default:`dark`},popperClass:String,showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},persistent:{type:Boolean,default:!0}}),on=e=>le(e)&&e.every(e=>R(e)),sn={close:(e,t)=>R(e)&&on(t),open:(e,t)=>R(e)&&on(t),select:(e,t,n,r)=>R(e)&&on(t)&&he(n)&&(_e(r)||r instanceof Promise)};var cn=M({name:`ElMenu`,props:an,emits:sn,setup(e,{emit:t,slots:n,expose:i}){let a=ie(),o=a.appContext.config.globalProperties.$router,s=W(),c=X(`menu`),l=X(`sub-menu`),u=W(-1),d=W(e.defaultOpeneds&&!e.collapse?e.defaultOpeneds.slice(0):[]),f=W(e.defaultActive),p=W({}),m=W({}),h=T(()=>e.mode===`horizontal`||e.mode===`vertical`&&e.collapse),g=()=>{let t=f.value&&p.value[f.value];if(!t||e.mode===`horizontal`||e.collapse)return;let n=t.indexPath;n.forEach(e=>{let t=m.value[e];t&&_(e,t.indexPath)})},_=(n,r)=>{d.value.includes(n)||(e.uniqueOpened&&(d.value=d.value.filter(e=>r.includes(e))),d.value.push(n),t(`open`,n,r))},v=e=>{let t=d.value.indexOf(e);t!==-1&&d.value.splice(t,1)},y=(e,n)=>{v(e),t(`close`,e,n)},b=({index:e,indexPath:t})=>{let n=d.value.includes(e);n?y(e,t):_(e,t)},x=n=>{(e.mode===`horizontal`||e.collapse)&&(d.value=[]);let{index:r,indexPath:i}=n;if(!(pe(r)||pe(i)))if(e.router&&o){let e=n.route||r,a=o.push(e).then(e=>(e||(f.value=r),e));t(`select`,r,i,{index:r,indexPath:i,route:e},a)}else f.value=r,t(`select`,r,i,{index:r,indexPath:i})},S=t=>{var n;let r=p.value,i=r[t]||f.value&&r[f.value]||r[e.defaultActive];f.value=(n=i?.index)??t},C=e=>{let t=getComputedStyle(e),n=Number.parseInt(t.marginLeft,10),r=Number.parseInt(t.marginRight,10);return e.offsetWidth+n+r||0},ee=()=>{var e,t;if(!s.value)return-1;let n=Array.from((t=(e=s.value)?.childNodes)??[]).filter(e=>e.nodeName!==`#text`||e.nodeValue),r=64,i=getComputedStyle(s.value),a=Number.parseInt(i.paddingLeft,10),o=Number.parseInt(i.paddingRight,10),c=s.value.clientWidth-a-o,l=0,u=0;return n.forEach((e,t)=>{e.nodeName!==`#comment`&&(l+=C(e),l<=c-r&&(u=t+1))}),u===n.length?-1:u},w=e=>m.value[e].indexPath,E=(e,t=33.34)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}},D=!0,O=()=>{if(u.value===ee())return;let e=()=>{u.value=-1,z(()=>{u.value=ee()})};D?e():E(e)(),D=!1};Z(()=>e.defaultActive,e=>{p.value[e]||(f.value=``),S(e)}),Z(()=>e.collapse,e=>{e&&(d.value=[])}),Z(p.value,g);let k;st(()=>{e.mode===`horizontal`&&e.ellipsis?k=Qe(s,O).stop:k?.()});let A=W(!1);{let t=e=>{m.value[e.index]=e},n=e=>{delete m.value[e.index]},r=e=>{p.value[e.index]=e},i=e=>{delete p.value[e.index]};Oe($t,ke({props:e,openedMenus:d,items:p,subMenus:m,activeIndex:f,isMenuPopup:h,addMenuItem:r,removeMenuItem:i,addSubMenu:t,removeSubMenu:n,openMenu:_,closeMenu:y,handleMenuItemClick:x,handleSubMenuClick:b})),Oe(`${en}${a.uid}`,{addSubMenu:t,removeSubMenu:n,mouseInChild:A,level:0})}H(()=>{e.mode===`horizontal`&&new Kt(a.vnode.el,c.namespace.value)});{let e=e=>{let{indexPath:t}=m.value[e];t.forEach(e=>_(e,t))};i({open:e,close:v,updateActiveIndex:S,handleResize:O})}let j=Qt(e,0);return()=>{var i,a;let o=(a=(i=n.default)?.call(n))??[],f=[];if(e.mode===`horizontal`&&s.value){let t=P(o),n=u.value===-1?t:t.slice(0,u.value),i=u.value===-1?[]:t.slice(u.value);i?.length&&e.ellipsis&&(o=n,f.push(F(rn,{index:`sub-menu-more`,class:l.e(`hide-arrow`),popperOffset:e.popperOffset},{title:()=>F(r,{class:l.e(`icon-more`)},{default:()=>F(e.ellipsisIcon)}),default:()=>i})))}let p=e.closeOnClickOutside?[[Pt,()=>{d.value.length&&(A.value||(d.value.forEach(e=>t(`close`,e,w(e))),d.value=[]))}]]:[],m=ct(F(`ul`,{key:String(e.collapse),role:`menubar`,ref:s,style:j.value,class:{[c.b()]:!0,[c.m(e.mode)]:!0,[c.m(`collapse`)]:e.collapse}},[...o,...f]),p);return e.collapseTransition&&e.mode===`vertical`?F(Yt,()=>m):m}}});const ln=C({index:{type:N([String,null]),default:null},route:{type:N([String,Object])},disabled:Boolean}),un={click:e=>R(e.index)&&le(e.indexPath)},dn=`ElMenuItem`,fn=M({name:dn}),pn=M({...fn,props:ln,emits:un,setup(e,{expose:t,emit:n}){let r=e;ge(r.index)&&te(dn,`Missing required prop: "index"`);let i=ie(),s=ce($t),c=X(`menu`),l=X(`menu-item`);s||Fe(dn,`can not inject root menu`);let{parentMenu:u,indexPath:d}=Xt(i,Re(r,`index`)),f=ce(`${en}${u.value.uid}`);f||Fe(dn,`can not inject sub menu`);let p=T(()=>r.index===s.activeIndex),m=ke({index:r.index,indexPath:d,active:p}),h=()=>{r.disabled||(s.handleMenuItemClick({index:r.index,indexPath:d.value,route:r.route}),n(`click`,m))};return H(()=>{f.addSubMenu(m),s.addMenuItem(m)}),Te(()=>{f.removeSubMenu(m),s.removeMenuItem(m)}),t({parentMenu:u,rootMenu:s,active:p,nsMenu:c,nsMenuItem:l,handleClick:h}),(e,t)=>(U(),k(`li`,{class:B([Y(l).b(),Y(l).is(`active`,Y(p)),Y(l).is(`disabled`,e.disabled)]),role:`menuitem`,tabindex:`-1`,onClick:h},[Y(u).type.name===`ElMenu`&&Y(s).props.collapse&&e.$slots.title?(U(),D(Y(a),{key:0,effect:Y(s).props.popperEffect,placement:`right`,"fallback-placements":[`left`],persistent:Y(s).props.persistent},{content:Q(()=>[K(e.$slots,`title`)]),default:Q(()=>[E(`div`,{class:B(Y(c).be(`tooltip`,`trigger`))},[K(e.$slots,`default`)],2)]),_:3},8,[`effect`,`persistent`])):(U(),k(o,{key:1},[K(e.$slots,`default`),K(e.$slots,`title`)],64))],2))}});var mn=h(pn,[[`__file`,`menu-item.vue`]]);const hn={title:String},gn=M({name:`ElMenuItemGroup`}),_n=M({...gn,props:hn,setup(e){let t=X(`menu-item-group`);return(e,n)=>(U(),k(`li`,{class:B(Y(t).b())},[E(`div`,{class:B(Y(t).e(`title`))},[e.$slots.title?K(e.$slots,`title`,{key:1}):(U(),k(o,{key:0},[A(J(e.title),1)],64))],2),E(`ul`,null,[K(e.$slots,`default`)])],2))}});var vn=h(_n,[[`__file`,`menu-item-group.vue`]]);const yn=lt(cn,{MenuItem:mn,MenuItemGroup:vn,SubMenu:rn}),bn=ft(mn),xn=ft(vn),Sn=ft(rn),Cn=[`primary`,`success`,`info`,`warning`,`error`],wn=C({customClass:{type:String,default:``},dangerouslyUseHTMLString:Boolean,duration:{type:Number,default:4500},icon:{type:I},id:{type:String,default:``},message:{type:N([String,Object,Function]),default:``},offset:{type:Number,default:0},onClick:{type:N(Function),default:()=>void 0},onClose:{type:N(Function),required:!0},position:{type:String,values:[`top-right`,`top-left`,`bottom-right`,`bottom-left`],default:`top-right`},showClose:{type:Boolean,default:!0},title:{type:String,default:``},type:{type:String,values:[...Cn,``],default:``},zIndex:Number,closeIcon:{type:I,default:w}}),Tn={destroy:()=>!0},En=M({name:`ElNotification`}),Dn=M({...En,props:wn,emits:Tn,setup(e,{expose:n}){let i=e,{ns:a,zIndex:s}=Je(`notification`),{nextZIndex:c,currentZIndex:l}=s,f=W(!1),p,m=T(()=>{let e=i.type;return e&&d[i.type]?a.m(e):``}),h=T(()=>i.type&&d[i.type]||i.icon),g=T(()=>i.position.endsWith(`right`)?`right`:`left`),_=T(()=>i.position.startsWith(`top`)?`top`:`bottom`),v=T(()=>{var e;return{[_.value]:`${i.offset}px`,zIndex:(e=i.zIndex)??l.value}});function y(){i.duration>0&&({stop:p}=rt(()=>{f.value&&x()},i.duration))}function b(){p?.()}function x(){f.value=!1}function S({code:e}){e===t.delete||e===t.backspace?b():e===t.esc?f.value&&x():y()}return H(()=>{y(),c(),f.value=!0}),Ue(document,`keydown`,S),n({visible:f,close:x}),(e,t)=>(U(),D(u,{name:Y(a).b(`fade`),onBeforeLeave:e.onClose,onAfterLeave:t=>e.$emit(`destroy`),persisted:``},{default:Q(()=>[ct(E(`div`,{id:e.id,class:B([Y(a).b(),e.customClass,Y(g)]),style:V(Y(v)),role:`alert`,onMouseenter:b,onMouseleave:y,onClick:e.onClick},[Y(h)?(U(),D(Y(r),{key:0,class:B([Y(a).e(`icon`),Y(m)])},{default:Q(()=>[(U(),D(q(Y(h))))]),_:1},8,[`class`])):O(`v-if`,!0),E(`div`,{class:B(Y(a).e(`group`))},[E(`h2`,{class:B(Y(a).e(`title`)),textContent:J(e.title)},null,10,[`textContent`]),ct(E(`div`,{class:B(Y(a).e(`content`)),style:V(e.title?void 0:{margin:0})},[K(e.$slots,`default`,{},()=>[e.dangerouslyUseHTMLString?(U(),k(o,{key:1},[O(` Caution here, message could've been compromised, never use user's input as message `),E(`p`,{innerHTML:e.message},null,8,[`innerHTML`])],2112)):(U(),k(`p`,{key:0},J(e.message),1))])],6),[[at,e.message]]),e.showClose?(U(),D(Y(r),{key:0,class:B(Y(a).e(`closeBtn`)),onClick:dt(x,[`stop`])},{default:Q(()=>[(U(),D(q(e.closeIcon)))]),_:1},8,[`class`,`onClick`])):O(`v-if`,!0)],2)],46,[`id`,`onClick`]),[[at,f.value]])]),_:3},8,[`name`,`onBeforeLeave`,`onAfterLeave`]))}});var On=h(Dn,[[`__file`,`notification.vue`]]);const kn={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},An=16;let jn=1;const Mn=function(e={},t){if(!ue)return{close:()=>void 0};(R(e)||ve(e))&&(e={message:e});let n=e.position||`top-right`,r=e.offset||0;kn[n].forEach(({vm:e})=>{var t;r+=((t=e.el)?.offsetHeight||0)+An}),r+=An;let i=`notification_${jn++}`,a=e.onClose,o={...e,offset:r,id:i,onClose:()=>{Nn(i,n,a)}},s=document.body;de(e.appendTo)?s=e.appendTo:R(e.appendTo)&&(s=document.querySelector(e.appendTo)),de(s)||(te(`ElNotification`,`the appendTo option is not an HTMLElement. Falling back to document.body.`),s=document.body);let c=document.createElement(`div`),l=j(On,o,L(o.message)?o.message:ve(o.message)?()=>o.message:null);return l.appContext=_e(t)?Mn._context:t,l.props.onDestroy=()=>{je(null,c)},je(l,c),kn[n].push({vm:l}),s.appendChild(c.firstElementChild),{close:()=>{l.component.exposed.visible.value=!1}}};Cn.forEach(e=>{Mn[e]=(t={},n)=>((R(t)||ve(t))&&(t={message:t}),Mn({...t,type:e},n))});function Nn(e,t,n){let r=kn[t],i=r.findIndex(({vm:t})=>{var n;return(n=t.component)?.props.id===e});if(i===-1)return;let{vm:a}=r[i];if(!a)return;n?.(a);let o=a.el.offsetHeight,s=t.split(`-`)[0];r.splice(i,1);let c=r.length;if(!(c<1))for(let e=i;e<c;e++){let{el:t,component:n}=r[e].vm,i=Number.parseInt(t.style[s],10)-o-An;n.props.offset=i}}function Pn(){for(let e of Object.values(kn))e.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}Mn.closeAll=Pn,Mn._context=null;const Fn=ut(Mn,`$notify`);function In(){let e=et(),t=e=>{let{route:t}=e;return{path:t.path.startsWith(`/`)?t.path:`/${t.path}`,name:t.name,title:t.meta?.title||``,icon:t.meta?.icon,index:e.index.toString()}},n=T(()=>{let n=e.getRoutes(),r=[],i=n.find(e=>e.name===`layout`);return i&&i.children&&i.children.forEach((e,n)=>{if(e.meta&&e.meta.title&&e.meta.icon){let i=t({route:e,index:n});r.push(i)}}),r}),r=(e,n,i)=>{let a;e?.meta?.title&&(a=t({route:e,index:typeof n==`string`?parseInt(n):n})),a&&e.children?.length&&(a.children=[],e.children.forEach((e,t)=>{a?.children&&r(e,`${n}-${t}`,a.children)})),a&&i.push(a)},i=T(()=>{let t=[...e.getRoutes()],n=[],i=t.filter(e=>e.name===`layout`);for(let e=0;e<i.length;e++)r(i[e],e,n);return n}),a=e=>{let t=n.value.find(t=>t.path===e);return t||=n.value.find(t=>{let n=t.path.endsWith(`/`)?t.path:t.path+`/`,r=e.endsWith(`/`)?e:e+`/`;return r.startsWith(n)||e.startsWith(t.path)}),t?t.index:`0`},o=e=>{let t=n.value.find(t=>t.index===e);return t?t.path:``},s=e=>n.value.find(t=>t.index===e);return{menuRoutes:n,layoutRoute:i,getActiveIndexByPath:a,getRoutePathByIndex:o,getRouteByIndex:s}}var Ln=M({__name:`RecursiveMenuItem`,props:{item:{},parentIndex:{},childIndex:{}},emits:[`menu-select`],setup(e,{emit:t}){let n=t,i=e=>{n(`menu-select`,e)},a=e=>{let t=[];if(e.name){let n=e.name.split(`-`)[1];n&&t.push(`menu-item-${n}`)}else if(e.path){let n=e.path.split(`/`),r=n[n.length-1];r&&t.push(`menu-item-${r}`)}return t.join(` `)};return(e,t)=>{let n=r,s=Me(`RecursiveMenuItem`,!0),c=Sn,l=bn;return e.item.children&&e.item.children.length>0?(U(),D(c,{index:e.item.path,key:e.item.path},{title:Q(()=>[e.item.icon?(U(),D(n,{key:0},{default:Q(()=>[(U(),D(q(e.item.icon)))]),_:1})):O(``,!0),E(`span`,null,J(e.item.title),1)]),default:Q(()=>[(U(!0),k(o,null,G(e.item.children,(t,n)=>(U(),D(s,{key:t.path||n,item:t,"parent-index":e.item.path,"child-index":n,onMenuSelect:i},null,8,[`item`,`parent-index`,`child-index`]))),128))]),_:1},8,[`index`])):(U(),D(l,{index:e.item.path,key:e.item.path,class:B(a(e.item)),onClick:t[0]||=t=>i(e.item)},{default:Q(()=>[e.item.icon?(U(),D(n,{key:0},{default:Q(()=>[(U(),D(q(e.item.icon)))]),_:1})):O(``,!0),E(`span`,null,J(e.item.title),1)]),_:1},8,[`index`,`class`]))}}}),Rn=m(Ln,[[`__scopeId`,`data-v-7f352830`]]);const zn={key:0,class:`minimized-modal-menu`},Bn={key:0,class:`minimized-group-title`},Vn=[`onClick`],Hn={key:0,class:`minimized-modal-title`};var Un=M({__name:`MinimizedModalMenu`,props:{collapsed:{type:Boolean}},setup(e){let{minimizedMenuItems:t,getModalIcon:n,getModalColor:i}=Xe(),a=e=>{let t={Document:ne,Operation:De,User:it,List:be,Tickets:Ie};return t[e]||ne};return(e,s)=>{let c=Ut,l=r,u=Ne(`tooltip-overflow`);return Y(t).length>0?(U(),k(`div`,zn,[j(c,{class:`menu-divider`}),e.collapsed?O(``,!0):(U(),k(`div`,Bn,[j(l,null,{default:Q(()=>[j(Y(Se))]),_:1}),s[0]||=E(`span`,null,`最小化窗口`,-1)])),(U(!0),k(o,null,G(Y(t),t=>(U(),k(`div`,{key:`minimized-${t.id}`,class:B([`minimized-modal-item`,{collapsed:e.collapsed}]),onClick:t.onClick},[j(l,{style:V({color:Y(i)(t.type)})},{default:Q(()=>[(U(),D(q(a(Y(n)(t.type)))))]),_:2},1032,[`style`]),e.collapsed?O(``,!0):ct((U(),k(`span`,Hn,[A(J(t.title),1)])),[[u]])],10,Vn))),128))])):O(``,!0)}}}),Wn=m(Un,[[`__scopeId`,`data-v-0f80ef92`]]);const Gn={class:`control-sidebar-wrapper`},Kn={class:`menu-container`};var qn=M({__name:`ControlSidebar`,emits:[`collapse`],setup(e,{emit:t}){let n=$e(),i=t,a=et(),s=W(!1),c=W(`0`),l=W([]),{menuRoutes:u,layoutRoute:d,getRoutePathByIndex:f}=In(),p=()=>{s.value=!s.value,i(`collapse`,s.value)},m=e=>{if(c.value=e,!e.startsWith(`layout-`)&&e.startsWith(`menu-`)){let t=e.replace(`menu-`,``),n=f(t);n&&a.push(n)}},h=e=>{e.path&&(a.push(e.path),c.value=e.path)},g=e=>{l.value.includes(e)||l.value.push(e)},_=e=>{let t=l.value.indexOf(e);t!==-1&&l.value.splice(t,1)};return Z(()=>n.path,e=>{if(e.startsWith(`/mas/`)){let e=`/`;l.value.includes(e)||l.value.push(e)}let t=u.value.find(t=>t.path===e);if(t){c.value=`menu-${t.index}`;return}let n=t=>{for(let r of t){if(r.path===e)return r.path;if(r.children){let e=n(r.children);if(e)return e}}return null},r=n(d.value);if(r){c.value=r;return}c.value=e},{immediate:!0}),(e,t)=>{let n=r,i=bn,a=yn;return U(),k(`div`,Gn,[E(`div`,{class:`collapse-btn`,onClick:p},[j(n,{class:B([`collapse-icon`,{"is-collapsed":s.value}])},{default:Q(()=>[s.value?(U(),D(Y(y),{key:1})):(U(),D(Y(v),{key:0}))]),_:1},8,[`class`])]),E(`div`,Kn,[j(a,{"default-active":c.value,"default-opened-keys":l.value,collapse:s.value,class:`mas-menu`,"background-color":`#001529`,"text-color":`#fff`,"active-text-color":`#1890ff`,onSelect:m,onOpen:g,onClose:_},{default:Q(()=>[(U(!0),k(o,null,G(Y(d),(e,t)=>(U(),D(Rn,{key:`layout-${e.path||t}`,item:e,onMenuSelect:h},null,8,[`item`]))),128)),(U(!0),k(o,null,G(Y(u),e=>(U(),D(i,{key:`menu-${e.index}`,index:`menu-${e.index}`,class:B(`menu-item-${e.name.split(`-`)[1]}`)},{default:Q(()=>[j(n,null,{default:Q(()=>[(U(),D(q(e.icon)))]),_:2},1024),E(`span`,null,J(e.title),1)]),_:2},1032,[`index`,`class`]))),128)),j(Wn,{collapsed:s.value},null,8,[`collapsed`])]),_:1},8,[`default-active`,`default-opened-keys`,`collapse`])])])}}}),Jn=m(qn,[[`__scopeId`,`data-v-516accc2`]]);const Yn={class:`human-agent-binding`},Xn={key:0,class:`binding-form`},Zn={class:`form-content`},Qn={class:`input-group`},$n={class:`input-group`},er={key:1,class:`binding-summary`},tr={class:`agent-name`};var nr=M({__name:`HumanAgentBinding`,props:{boundAgent:{}},emits:[`update:boundAgent`,`agentBound`],setup(e,{emit:t}){let r=e,o=t,s=Ye(),c=Ze(),l=T(()=>r.boundAgent||s.currentHumanAgent),u=W(``),d=W(``),f=W(!1),p=W(`primary`),m=W(`确认`),h=W(null),g=()=>{h.value&&clearTimeout(h.value),h.value=window.setTimeout(()=>{p.value=`primary`,m.value=`确认`},2e3)},_=()=>{p.value=`success`,m.value=`绑定成功`,g()},v=()=>{p.value=`danger`,m.value=`绑定失败`,g()},y=e=>{e.preventDefault();let t=e.dataTransfer?.getData(`text/plain`);if(t)try{let e=JSON.parse(t);e.type===`agent`&&e.agent_id&&(u.value=e.agent_id,i.success(`已自动填入Agent ID`))}catch(e){console.error(`解析拖拽数据失败:`,e)}},b=async()=>{if(!u.value||!d.value){i.warning(`请填写完整信息`);return}f.value=!0;try{let e=await S(u.value,d.value);if(!e.success){v(),i.error(e.message);return}let t=await ae(`agent`),n=Object.keys(t).find(e=>t[e].agent_id===u.value);if(n&&t[n]){let r=t[n];if(!n.includes(`Human`)){v(),i.error(`该Agent不是人类操作端Agent`);return}o(`update:boundAgent`,r),o(`agentBound`,r);try{await s.setHumanAgentLogin(r.agent_id,r)}catch(e){console.error(`保存登录信息失败，但不影响绑定操作:`,e)}u.value=``,d.value=``,_(),i.success(e.message)}else v(),i.error(`Agent ID不存在`)}catch(e){console.error(`绑定失败:`,e),v(),i.error(`绑定失败，请检查Agent ID和密码`)}finally{f.value=!1}},x=async()=>{await s.clearHumanAgentLogin(),o(`update:boundAgent`,null),u.value=``,d.value=``,h.value&&clearTimeout(h.value),p.value=`primary`,m.value=`确认`},C=()=>{if(!l.value){i.warning(`没有绑定的Agent`);return}try{c.createModal({type:`agent`,title:`Agent详情 - [${l.value.role}]${l.value.name}`,id:l.value.agent_id,data:l.value,slots:{default:`AgentInfo`},componentProps:{agentData:l.value}})}catch(e){console.error(`Error creating modal:`,e),console.error(`Error stack:`,e instanceof Error?e.stack:`No stack trace`),i.error(`打开Agent详情失败`)}},ee=e=>{let t={idle:`status-idle`,working:`status-working`,waiting:`status-waiting`,finished:`status-finished`,failed:`status-failed`};return t[e]||`status-idle`},w=e=>{let t={idle:`空闲`,working:`工作中`,waiting:`等待中`,finished:`已完成`,failed:`失败`};return t[e]||`未知`};return Ee(()=>{h.value&&clearTimeout(h.value)}),Z(()=>s.currentHumanAgent,e=>{e&&!r.boundAgent&&o(`update:boundAgent`,e)},{immediate:!0}),(e,t)=>{let r=jt,i=n,o=a;return U(),k(`div`,Yn,[l.value?(U(),k(`div`,er,[E(`div`,{class:`bound-agent-info`,onDblclick:C},[E(`div`,tr,`[`+J(l.value.role)+`] `+J(l.value.name),1)],32),j(o,{content:`更换绑定的HumanAgent`,placement:`top`,"show-after":500},{default:Q(()=>[j(i,{size:`small`,onClick:x},{default:Q(()=>t[7]||=[A(` 更换 `)]),_:1,__:[7]})]),_:1})])):(U(),k(`div`,Xn,[t[6]||=E(`div`,{class:`form-title`},`绑定人类操作端`,-1),E(`div`,Zn,[E(`div`,Qn,[t[4]||=E(`label`,null,`Agent ID`,-1),j(r,{modelValue:u.value,"onUpdate:modelValue":t[0]||=e=>u.value=e,placeholder:`请输入要绑定的Agent ID (或拖入要绑定的Agent详细信息窗口)`,class:`agent-id-input`,clearable:``,onDrop:y,onDragover:t[1]||=dt(()=>{},[`prevent`]),onDragenter:t[2]||=dt(()=>{},[`prevent`])},null,8,[`modelValue`])]),E(`div`,$n,[t[5]||=E(`label`,null,`访问密码`,-1),j(r,{modelValue:d.value,"onUpdate:modelValue":t[3]||=e=>d.value=e,clearable:``,type:`password`,placeholder:`请输入要绑定的Agent的访问密码`,"show-password":``},null,8,[`modelValue`])]),j(i,{type:p.value,loading:f.value,disabled:!u.value||!d.value,class:`confirm-button`,onClick:b},{default:Q(()=>[A(J(m.value),1)]),_:1},8,[`type`,`loading`,`disabled`])])]))])}}}),rr=m(nr,[[`__scopeId`,`data-v-c27d242a`]]);const ir={class:`message-management`},ar={key:0,class:`conversation-list`},or={class:`group-conversations`},sr=[`onDblclick`],cr={class:`conversation-info`},lr={class:`task-name`},ur={class:`participant-count`},dr={key:0,class:`unread-indicator`},fr={class:`private-conversations`},pr=[`onDblclick`],mr={class:`conversation-info`},hr={class:`task-name`},gr={class:`agent-info`},_r={key:0,class:`unread-indicator`},vr={key:0,class:`empty-state`},yr={key:1,class:`unbound-state`};var br=M({__name:`MessageManagement`,props:{boundAgent:{}},emits:[`openConversation`],setup(e,{emit:t}){let n=e,r=t,a=W([]),s=W([]),c=Ze(),l=Ye(),u=e=>{let t=l.agents.find(t=>t.agent_id===e);return t?.name||e.slice(-6)},d=e=>{let t=l.agents.find(t=>t.agent_id===e);return t?.role||`未知`},f=async()=>{if(!n.boundAgent?.working_memory)return;let e=await ae(`task`),t=[];for(let r of Object.keys(n.boundAgent.working_memory)){let n=Object.keys(e).find(t=>e[t].task_id===r);if(n&&e[n]){let r=e[n];r.shared_conversation_pool&&r.shared_conversation_pool.length>0&&t.push({taskId:r.task_id,taskName:r.task_name,participantCount:r.task_group.length,hasUnread:!1,messages:r.shared_conversation_pool})}}a.value=t},p=async()=>{if(!n.boundAgent?.conversation_pool?.conversation_privates)return;let e=await ae(`agent`),t=await ae(`task`),r=[];for(let[i,a]of Object.entries(n.boundAgent.conversation_pool.conversation_privates)){let n=Object.keys(e).find(t=>e[t].agent_id===i);if(n&&e[n]){let i=e[n];for(let[e,n]of Object.entries(a)){let a=Object.keys(t).find(n=>t[n].task_id===e);if(a&&t[a]&&Array.isArray(n)&&n.length>0){let e=t[a];r.push({agentId:i.agent_id,taskId:e.task_id,taskName:e.task_name,name:i.name,role:i.role,hasUnread:!1,messages:n})}}}}s.value=r},m=(e,t)=>{let a=n.boundAgent?.agent_id;if(!a){i.error(`HumanAgent ID 不存在`);return}if(e===`private`){let e=t.agentId;c.createModal({type:`chat`,title:`与 [${d(e)}]${u(e)} 的消息`,id:a,data:{humanAgentId:a,targetAgentId:e},componentProps:{humanAgentId:a,targetAgentId:e},size:{width:1e3,height:700}})}else if(e===`group`){let e=t;c.createModal({type:`chat`,title:`群聊 - ${e.taskName}`,id:`${a}-${e.taskId}`,data:{humanAgentId:a,taskId:e.taskId},componentProps:{humanAgentId:a,taskId:e.taskId},size:{width:1200,height:800}})}r(`openConversation`,{type:e,conversation:t,boundAgent:n.boundAgent})};return Z(()=>n.boundAgent,async e=>{e?await Promise.all([f(),p()]):(a.value=[],s.value=[])},{immediate:!0,deep:!0}),(e,t)=>(U(),k(`div`,ir,[t[2]||=E(`div`,{class:`header`},[E(`span`,{class:`title`},`消息管理`)],-1),e.boundAgent?(U(),k(`div`,ar,[E(`div`,or,[(U(!0),k(o,null,G(a.value,e=>(U(),k(`div`,{key:e.taskId,class:`conversation-item group-conversation`,onDblclick:t=>m(`group`,e)},[E(`div`,cr,[E(`div`,lr,J(e.taskName),1),E(`div`,ur,`[`+J(e.participantCount)+`]`,1)]),e.hasUnread?(U(),k(`div`,dr)):O(``,!0)],40,sr))),128))]),E(`div`,fr,[(U(!0),k(o,null,G(s.value,e=>(U(),k(`div`,{key:`${e.agentId}-${e.taskId}`,class:`conversation-item private-conversation`,onDblclick:t=>m(`private`,e)},[E(`div`,mr,[E(`div`,hr,J(e.taskName),1),E(`div`,gr,`[`+J(e.role)+`] `+J(e.name),1)]),e.hasUnread?(U(),k(`div`,_r)):O(``,!0)],40,pr))),128))]),!a.value.length&&!s.value.length?(U(),k(`div`,vr,t[0]||=[E(`div`,{class:`empty-icon`},`💬`,-1),E(`div`,{class:`empty-text`},`暂无对话`,-1)])):O(``,!0)])):(U(),k(`div`,yr,t[1]||=[E(`div`,{class:`unbound-icon`},`🔗`,-1),E(`div`,{class:`unbound-text`},`请先绑定HumanAgent`,-1)]))]))}}),xr=m(br,[[`__scopeId`,`data-v-bf750c6b`]]);const Sr=new ye({html:!0,breaks:!0,linkify:!0,typographer:!0}),Cr=[`script`,`object`,`embed`,`form`,`input`,`button`,`select`,`textarea`,`iframe`,`frame`,`frameset`,`applet`,`base`,`link`,`meta`,`style`],wr=e=>{let t=e;return Cr.forEach(e=>{let n=RegExp(`</?${e}[^>]*>`,`gi`);t=t.replace(n,``)}),t=t.replace(/javascript:/gi,``),t=t.replace(/\s*on\w+\s*=\s*[^>]*/gi,``),t},Tr=(e,t=!0)=>{if(!e)return``;let n=Sr.render(e);return t&&(n=wr(n)),n},Er={class:`global-message-notification`},Dr={class:`header`},Or={class:`title`},kr={key:0},Ar={class:`message-list`},jr={class:`message-content`},Mr={key:0,class:`empty-message`};var Nr=M({__name:`GlobalMessageNotification`,props:{boundAgent:{}},setup(e){let t=e,n=Ye(),i=W(!1),s=W(!1),c=W(0),l=T(()=>t.boundAgent||n.currentHumanAgent||null),u=T(()=>{let e=l.value;return e?e?.agent_id?.includes(`Human`)||typeof n.isCurrentHumanAgent==`function`&&n.isCurrentHumanAgent(e.agent_id):!1}),d=T(()=>{let e=l.value,t=e?.conversation_pool?.global_messages??e?.conversation?.global_messages??e?.conversation?.global_mesages??e?.conversation_pool?.global_mesages??[];return Array.isArray(t)?t:[]}),f=T(()=>[...d.value].reverse());Z(d,e=>{if(e.length>c.value){let t=e.slice(c.value);if(s.value=!0,c.value=e.length,u.value&&t.length){let e=t.slice(-3);e.forEach(e=>{let t=Tr(e,!0),n=`<div class=\"mas-global-msg\">${t}</div>`;Fn({title:`全局消息`,message:n,dangerouslyUseHTMLString:!0,position:`bottom-right`,duration:1500,type:`info`,showClose:!0,customClass:`global-msg-pop`})}),z(()=>{try{let e=document.querySelectorAll(`.el-notification.global-msg-pop .el-notification__content .mas-global-msg`);e.forEach(e=>{let t=e;t.__mas_link_processed__||(ze(t),b(t),t.__mas_link_processed__=!0)})}catch(e){console.warn(`Notification MAS link batch transform failed:`,e)}})}}},{deep:!0,immediate:!0});let p=()=>{i.value=!0,s.value=!1},m=()=>{i.value=!1};H(()=>{});let h=e=>{if(i.value){let t=e.target;t.closest(`.global-message-notification`)||m()}};return H(()=>{document.addEventListener(`click`,h)}),Ee(()=>{document.removeEventListener(`click`,h)}),(e,t)=>{let n=r,c=a,l=Ne(`tooltip-overflow`),u=Ne(`markdown`);return U(),k(`div`,Er,[i.value?O(``,!0):(U(),k(`div`,{key:0,class:B([`notification-icon`,{"has-new-message":s.value}]),onClick:dt(p,[`stop`])},[j(c,{content:`全局消息`,placement:`bottom`},{default:Q(()=>[j(n,{size:20},{default:Q(()=>[j(Y(x))]),_:1})]),_:1})],2)),i.value?(U(),k(`div`,{key:1,class:`notification-expanded`,onClick:t[0]||=dt(()=>{},[`stop`])},[E(`div`,Dr,[ct((U(),k(`span`,Or,[t[1]||=A(`全局消息`),f.value.length?(U(),k(`span`,kr,` (`+J(f.value.length)+`)`,1)):O(``,!0)])),[[l]]),j(n,{class:`close-btn`,onClick:m},{default:Q(()=>[j(Y(w))]),_:1})]),E(`div`,Ar,[(U(!0),k(o,null,G(f.value,(e,t)=>(U(),k(`div`,{key:`message-${t}`,class:`message-item`},[ct(E(`div`,jr,null,512),[[u,{content:e,safe:!0,options:{breaks:!0,linkify:!0}}]])]))),128)),f.value.length?O(``,!0):(U(),k(`div`,Mr,`暂无全局消息`))])])):O(``,!0),i.value?(U(),k(`div`,{key:2,class:`overlay`,onClick:m})):O(``,!0)])}}}),Pr=m(Nr,[[`__scopeId`,`data-v-7d1bd9cc`]]);const Fr={class:`secondary-workspace-wrapper`},Ir={class:`agent-binding-section`},Lr={class:`message-management-section`};var Rr=M({__name:`SecondaryWorkspace`,emits:[`minimize`],setup(e){let t=W(null),n=e=>{t.value=e},r=e=>{};return(e,i)=>(U(),k(`div`,Fr,[E(`div`,Ir,[j(rr,{"bound-agent":t.value,"onUpdate:boundAgent":i[0]||=e=>t.value=e,onAgentBound:n},null,8,[`bound-agent`])]),E(`div`,Lr,[j(xr,{"bound-agent":t.value,onOpenConversation:r},null,8,[`bound-agent`])]),i[1]||=E(`div`,{class:`multi-function-section`},[E(`div`,{class:`placeholder`},`多功能区 - 待开发`)],-1),i[2]||=E(`div`,{class:`tool-usage-section`},[E(`div`,{class:`placeholder`},`工具使用区 - 待开发`)],-1),j(Pr,{"bound-agent":t.value,class:`notification-component`},null,8,[`bound-agent`])]))}}),zr=m(Rr,[[`__scopeId`,`data-v-b38295fd`]]);const Br={class:`mas-layout`};var Vr=M({__name:`index`,setup(e){let t=W(!1),n=W(800),r=W(300),i=W(1100),a=W(!1),o=W(0),s=W(0),c=e=>{t.value=e},l=e=>{a.value=!0,o.value=e.clientX,s.value=n.value,document.addEventListener(`mousemove`,d,{passive:!0}),document.addEventListener(`mouseup`,f),document.body.style.cursor=`col-resize`,document.body.style.userSelect=`none`,document.body.classList.add(`resizing`)},u=(e,t)=>{let n=null,r=0;return(...i)=>{let a=Date.now();a-r>t?(e(...i),r=a):(n&&clearTimeout(n),n=window.setTimeout(()=>e(...i),t-(a-r)))}},d=u(e=>{if(!a.value)return;let t=e.clientX-o.value,c=s.value+t,l=i.value-c;c>=400&&l>=250&&requestAnimationFrame(()=>{n.value=c,r.value=l})},16),f=()=>{a.value=!1,document.removeEventListener(`mousemove`,d),document.removeEventListener(`mouseup`,f),document.body.style.cursor=``,document.body.style.userSelect=``,document.body.classList.remove(`resizing`)};return H(()=>{let e=()=>{i.value=window.innerWidth-(t.value?64:200);let e=300,a=i.value-e;a>=400?(r.value=e,n.value=a):(n.value=400,r.value=Math.max(250,i.value-400))};e(),window.addEventListener(`resize`,e,{passive:!0}),Ee(()=>{window.removeEventListener(`resize`,e)})}),(e,i)=>{let a=Me(`router-view`);return U(),k(`div`,Br,[E(`div`,{class:B([`control-sidebar`,{"is-collapsed":t.value}])},[j(Jn,{onCollapse:c})],2),E(`div`,{class:`main-workspace`,style:V({width:`${n.value}px`})},[j(a)],4),E(`div`,{class:`workspace-divider`,onMousedown:l},i[0]||=[E(`div`,{class:`divider-handle`},[E(`div`,{class:`divider-line`})],-1)],32),E(`div`,{class:`secondary-workspace`,style:V({width:`${r.value}px`})},[j(zr)],4)])}}}),Hr=m(Vr,[[`__scopeId`,`data-v-37c994ba`]]);export{Hr as default};